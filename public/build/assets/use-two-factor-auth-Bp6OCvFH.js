import{a as t,j as V}from"./app-BrEbNoYA.js";import{c as ae}from"./button-C7Pl7FEk.js";import{c as He}from"./createLucideIcon-J7r4eQPE.js";import{q as M}from"./index-CMWG4mbA.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["path",{d:"M5 12h14",key:"1ays0h"}]],Ge=He("Minus",$e);var qe=Object.defineProperty,Ke=Object.defineProperties,ze=Object.getOwnPropertyDescriptors,se=Object.getOwnPropertySymbols,ke=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable,je=(e,n,o)=>n in e?qe(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,Qe=(e,n)=>{for(var o in n||(n={}))ke.call(n,o)&&je(e,o,n[o]);if(se)for(var o of se(n))Oe.call(n,o)&&je(e,o,n[o]);return e},Ve=(e,n)=>Ke(e,ze(n)),Je=(e,n)=>{var o={};for(var a in e)ke.call(e,a)&&n.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&se)for(var a of se(e))n.indexOf(a)<0&&Oe.call(e,a)&&(o[a]=e[a]);return o};function Xe(e){let n=setTimeout(e,0),o=setTimeout(e,10),a=setTimeout(e,50);return[n,o,a]}function Ze(e){let n=t.useRef();return t.useEffect(()=>{n.current=e}),n.current}var Ue=18,Me=40,Ye=`${Me}px`,et=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function tt({containerRef:e,inputRef:n,pushPasswordManagerStrategy:o,isFocused:a}){let[S,i]=t.useState(!1),[R,m]=t.useState(!1),[F,T]=t.useState(!1),D=t.useMemo(()=>o==="none"?!1:(o==="increase-width"||o==="experimental-no-flickering")&&S&&R,[S,R,o]),f=t.useCallback(()=>{let g=e.current,j=n.current;if(!g||!j||F||o==="none")return;let v=g,u=v.getBoundingClientRect().left+v.offsetWidth,J=v.getBoundingClientRect().top+v.offsetHeight/2,c=u-Ue,U=J;document.querySelectorAll(et).length===0&&document.elementFromPoint(c,U)===g||(i(!0),T(!0))},[e,n,F,o]);return t.useEffect(()=>{let g=e.current;if(!g||o==="none")return;function j(){let u=window.innerWidth-g.getBoundingClientRect().right;m(u>=Me)}j();let v=setInterval(j,1e3);return()=>{clearInterval(v)}},[e,o]),t.useEffect(()=>{let g=a||document.activeElement===n.current;if(o==="none"||!g)return;let j=setTimeout(f,0),v=setTimeout(f,2e3),u=setTimeout(f,5e3),J=setTimeout(()=>{T(!0)},6e3);return()=>{clearTimeout(j),clearTimeout(v),clearTimeout(u),clearTimeout(J)}},[n,a,o,f]),{hasPWMBadge:S,willPushPWMBadge:D,PWM_BADGE_SPACE_WIDTH:Ye}}var Re=t.createContext({}),Te=t.forwardRef((e,n)=>{var o=e,{value:a,onChange:S,maxLength:i,textAlign:R="left",pattern:m,placeholder:F,inputMode:T="numeric",onComplete:D,pushPasswordManagerStrategy:f="increase-width",pasteTransformer:g,containerClassName:j,noScriptCSSFallback:v=nt,render:u,children:J}=o,c=Je(o,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),U,me,fe,ge,ve;let[De,Ie]=t.useState(typeof c.defaultValue=="string"?c.defaultValue:""),d=a??De,G=Ze(d),Y=t.useCallback(r=>{S?.(r),Ie(r)},[S]),k=t.useMemo(()=>m?typeof m=="string"?new RegExp(m):m:null,[m]),p=t.useRef(null),ie=t.useRef(null),ue=t.useRef({value:d,onChange:Y,isIOS:typeof window<"u"&&((me=(U=window?.CSS)==null?void 0:U.supports)==null?void 0:me.call(U,"-webkit-touch-callout","none"))}),oe=t.useRef({prev:[(fe=p.current)==null?void 0:fe.selectionStart,(ge=p.current)==null?void 0:ge.selectionEnd,(ve=p.current)==null?void 0:ve.selectionDirection]});t.useImperativeHandle(n,()=>p.current,[]),t.useEffect(()=>{let r=p.current,l=ie.current;if(!r||!l)return;ue.current.value!==r.value&&ue.current.onChange(r.value),oe.current.prev=[r.selectionStart,r.selectionEnd,r.selectionDirection];function h(){if(document.activeElement!==r){te(null),ne(null);return}let s=r.selectionStart,b=r.selectionEnd,le=r.selectionDirection,C=r.maxLength,K=r.value,I=oe.current.prev,N=-1,W=-1,z;if(K.length!==0&&s!==null&&b!==null){let _e=s===b,Be=s===K.length&&K.length<C;if(_e&&!Be){let Q=s;if(Q===0)N=0,W=1,z="forward";else if(Q===C)N=Q-1,W=Q,z="backward";else if(C>1&&K.length>1){let pe=0;if(I[0]!==null&&I[1]!==null){z=Q<I[1]?"backward":"forward";let Le=I[0]===I[1]&&I[0]<C;z==="backward"&&!Le&&(pe=-1)}N=pe+Q,W=pe+Q+1}}N!==-1&&W!==-1&&N!==W&&p.current.setSelectionRange(N,W,z)}let xe=N!==-1?N:s,Pe=W!==-1?W:b,We=z??le;te(xe),ne(Pe),oe.current.prev=[xe,Pe,We]}if(document.addEventListener("selectionchange",h,{capture:!0}),h(),document.activeElement===r&&ce(!0),!document.getElementById("input-otp-style")){let s=document.createElement("style");if(s.id="input-otp-style",document.head.appendChild(s),s.sheet){let b="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";re(s.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),re(s.sheet,`[data-input-otp]:autofill { ${b} }`),re(s.sheet,`[data-input-otp]:-webkit-autofill { ${b} }`),re(s.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),re(s.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let w=()=>{l&&l.style.setProperty("--root-height",`${r.clientHeight}px`)};w();let y=new ResizeObserver(w);return y.observe(r),()=>{document.removeEventListener("selectionchange",h,{capture:!0}),y.disconnect()}},[]);let[be,we]=t.useState(!1),[ee,ce]=t.useState(!1),[q,te]=t.useState(null),[X,ne]=t.useState(null);t.useEffect(()=>{Xe(()=>{var r,l,h,w;(r=p.current)==null||r.dispatchEvent(new Event("input"));let y=(l=p.current)==null?void 0:l.selectionStart,s=(h=p.current)==null?void 0:h.selectionEnd,b=(w=p.current)==null?void 0:w.selectionDirection;y!==null&&s!==null&&(te(y),ne(s),oe.current.prev=[y,s,b])})},[d,ee]),t.useEffect(()=>{G!==void 0&&d!==G&&G.length<i&&d.length===i&&D?.(d)},[i,D,G,d]);let Z=tt({containerRef:ie,inputRef:p,pushPasswordManagerStrategy:f,isFocused:ee}),ye=t.useCallback(r=>{let l=r.currentTarget.value.slice(0,i);if(l.length>0&&k&&!k.test(l)){r.preventDefault();return}typeof G=="string"&&l.length<G.length&&document.dispatchEvent(new Event("selectionchange")),Y(l)},[i,Y,G,k]),Se=t.useCallback(()=>{var r;if(p.current){let l=Math.min(p.current.value.length,i-1),h=p.current.value.length;(r=p.current)==null||r.setSelectionRange(l,h),te(l),ne(h)}ce(!0)},[i]),Ce=t.useCallback(r=>{var l,h;let w=p.current;if(!g&&(!ue.current.isIOS||!r.clipboardData||!w))return;let y=r.clipboardData.getData("text/plain"),s=g?g(y):y;r.preventDefault();let b=(l=p.current)==null?void 0:l.selectionStart,le=(h=p.current)==null?void 0:h.selectionEnd,C=(b!==le?d.slice(0,b)+s+d.slice(le):d.slice(0,b)+s+d.slice(b)).slice(0,i);if(C.length>0&&k&&!k.test(C))return;w.value=C,Y(C);let K=Math.min(C.length,i-1),I=C.length;w.setSelectionRange(K,I),te(K),ne(I)},[i,Y,k,d]),Ae=t.useMemo(()=>({position:"relative",cursor:c.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[c.disabled]),Ee=t.useMemo(()=>({position:"absolute",inset:0,width:Z.willPushPWMBadge?`calc(100% + ${Z.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:Z.willPushPWMBadge?`inset(0 ${Z.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:R,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[Z.PWM_BADGE_SPACE_WIDTH,Z.willPushPWMBadge,R]),Fe=t.useMemo(()=>t.createElement("input",Ve(Qe({autoComplete:c.autoComplete||"one-time-code"},c),{"data-input-otp":!0,"data-input-otp-placeholder-shown":d.length===0||void 0,"data-input-otp-mss":q,"data-input-otp-mse":X,inputMode:T,pattern:k?.source,"aria-placeholder":F,style:Ee,maxLength:i,value:d,ref:p,onPaste:r=>{var l;Ce(r),(l=c.onPaste)==null||l.call(c,r)},onChange:ye,onMouseOver:r=>{var l;we(!0),(l=c.onMouseOver)==null||l.call(c,r)},onMouseLeave:r=>{var l;we(!1),(l=c.onMouseLeave)==null||l.call(c,r)},onFocus:r=>{var l;Se(),(l=c.onFocus)==null||l.call(c,r)},onBlur:r=>{var l;ce(!1),(l=c.onBlur)==null||l.call(c,r)}})),[ye,Se,Ce,T,Ee,i,X,q,c,k?.source,d]),de=t.useMemo(()=>({slots:Array.from({length:i}).map((r,l)=>{var h;let w=ee&&q!==null&&X!==null&&(q===X&&l===q||l>=q&&l<X),y=d[l]!==void 0?d[l]:null,s=d[0]!==void 0?null:(h=F?.[l])!=null?h:null;return{char:y,placeholderChar:s,isActive:w,hasFakeCaret:w&&y===null}}),isFocused:ee,isHovering:!c.disabled&&be}),[ee,be,i,X,q,c.disabled,d]),Ne=t.useMemo(()=>u?u(de):t.createElement(Re.Provider,{value:de},J),[J,de,u]);return t.createElement(t.Fragment,null,v!==null&&t.createElement("noscript",null,t.createElement("style",null,v)),t.createElement("div",{ref:ie,"data-input-otp-container":!0,style:Ae,className:j},Ne,t.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},Fe)))});Te.displayName="Input";function re(e,n){try{e.insertRule(n)}catch{console.error("input-otp could not insert CSS rule:",n)}}var nt=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`,pt="^\\d+$";const rt=t.forwardRef(({className:e,containerClassName:n,...o},a)=>V.jsx(Te,{ref:a,containerClassName:ae("flex items-center gap-2 has-[:disabled]:opacity-50",n),className:ae("disabled:cursor-not-allowed",e),...o}));rt.displayName="InputOTP";const ot=t.forwardRef(({className:e,...n},o)=>V.jsx("div",{ref:o,className:ae("flex items-center",e),...n}));ot.displayName="InputOTPGroup";const lt=t.forwardRef(({index:e,className:n,...o},a)=>{const S=t.useContext(Re),{char:i,hasFakeCaret:R,isActive:m}=S.slots[e];return V.jsxs("div",{ref:a,className:ae("relative flex h-9 w-9 items-center justify-center border-y border-r border-input text-sm shadow-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",m&&"z-10 ring-1 ring-ring",n),...o,children:[i,R&&V.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:V.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});lt.displayName="InputOTPSlot";const at=t.forwardRef(({...e},n)=>V.jsx("div",{ref:n,role:"separator",...e,children:V.jsx(Ge,{})}));at.displayName="InputOTPSeparator";const _=e=>({url:_.url(e),method:"post"});_.definition={methods:["post"],url:"/two-factor-challenge"};_.url=e=>_.definition.url+M(e);_.post=e=>({url:_.url(e),method:"post"});const st={store:Object.assign(_,_)},A=e=>({url:A.url(e),method:"get"});A.definition={methods:["get","head"],url:"/two-factor-challenge"};A.url=e=>A.definition.url+M(e);A.get=e=>({url:A.url(e),method:"get"});A.head=e=>({url:A.url(e),method:"head"});const B=e=>({url:B.url(e),method:"post"});B.definition={methods:["post"],url:"/user/two-factor-authentication"};B.url=e=>B.definition.url+M(e);B.post=e=>({url:B.url(e),method:"post"});const L=e=>({url:L.url(e),method:"post"});L.definition={methods:["post"],url:"/user/confirmed-two-factor-authentication"};L.url=e=>L.definition.url+M(e);L.post=e=>({url:L.url(e),method:"post"});const H=e=>({url:H.url(e),method:"delete"});H.definition={methods:["delete"],url:"/user/two-factor-authentication"};H.url=e=>H.definition.url+M(e);H.delete=e=>({url:H.url(e),method:"delete"});const E=e=>({url:E.url(e),method:"get"});E.definition={methods:["get","head"],url:"/user/two-factor-qr-code"};E.url=e=>E.definition.url+M(e);E.get=e=>({url:E.url(e),method:"get"});E.head=e=>({url:E.url(e),method:"head"});const x=e=>({url:x.url(e),method:"get"});x.definition={methods:["get","head"],url:"/user/two-factor-secret-key"};x.url=e=>x.definition.url+M(e);x.get=e=>({url:x.url(e),method:"get"});x.head=e=>({url:x.url(e),method:"head"});const P=e=>({url:P.url(e),method:"get"});P.definition={methods:["get","head"],url:"/user/two-factor-recovery-codes"};P.url=e=>P.definition.url+M(e);P.get=e=>({url:P.url(e),method:"get"});P.head=e=>({url:P.url(e),method:"head"});const $=e=>({url:$.url(e),method:"post"});$.definition={methods:["post"],url:"/user/two-factor-recovery-codes"};$.url=e=>$.definition.url+M(e);$.post=e=>({url:$.url(e),method:"post"});const O=e=>({url:O.url(e),method:"get"});O.definition={methods:["get","head"],url:"/settings/two-factor"};O.url=e=>O.definition.url+M(e);O.get=e=>({url:O.url(e),method:"get"});O.head=e=>({url:O.url(e),method:"head"});Object.assign(A,st),Object.assign(B,B),Object.assign(L,L),Object.assign(H,H),Object.assign(E,E),Object.assign(x,x),Object.assign(P,P),Object.assign($,$),Object.assign(O,O);const ht=6,he=async e=>{const n=await fetch(e,{headers:{Accept:"application/json"}});if(!n.ok)throw new Error(`Failed to fetch: ${n.status}`);return n.json()},mt=()=>{const[e,n]=t.useState(null),[o,a]=t.useState(null),[S,i]=t.useState([]),[R,m]=t.useState([]),F=t.useMemo(()=>e!==null&&o!==null,[e,o]),T=t.useCallback(async()=>{try{const{svg:u}=await he(E.url());n(u)}catch{m(u=>[...u,"Failed to fetch QR code"]),n(null)}},[]),D=t.useCallback(async()=>{try{const{secretKey:u}=await he(x.url());a(u)}catch{m(u=>[...u,"Failed to fetch a setup key"]),a(null)}},[]),f=t.useCallback(()=>{m([])},[]),g=t.useCallback(()=>{a(null),n(null),f()},[f]),j=t.useCallback(async()=>{try{f();const u=await he(P.url());i(u)}catch{m(u=>[...u,"Failed to fetch recovery codes"]),i([])}},[f]),v=t.useCallback(async()=>{try{f(),await Promise.all([T(),D()])}catch{n(null),a(null)}},[f,T,D]);return{qrCodeSvg:e,manualSetupKey:o,recoveryCodesList:S,hasSetupData:F,errors:R,clearErrors:f,clearSetupData:g,fetchQrCode:T,fetchSetupKey:D,fetchSetupData:v,fetchRecoveryCodes:j}};export{rt as I,pt as K,ht as O,ot as a,lt as b,L as c,O as d,H as e,B as f,$ as r,_ as s,mt as u};
