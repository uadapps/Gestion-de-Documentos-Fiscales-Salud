import{a as w,j as e,H as C}from"./app-DHDqqX-V.js";import{A}from"./app-layout-BkDGo_wD.js";import{C as l,a as u,b as p,c as n}from"./card-4OvKDv4H.js";import{B as o}from"./button-Cv1-xyb3.js";import{B as r}from"./badge-L5K8Jc4u.js";import{L as t}from"./label-AQnqvwyi.js";import{B as d}from"./brain-CTcUrmA9.js";import{R as D}from"./refresh-cw-CtiWraue.js";import{E}from"./eye-BXIS0RXb.js";import{D as k}from"./download-BB1qucWf.js";import{F as g,C as N}from"./file-text-C7WQCdqc.js";import{C as f}from"./circle-alert-BIRA8Bys.js";import{C as m}from"./calendar-BxalYjcm.js";import{c as v}from"./createLucideIcon-CyJ2xDM9.js";import{C as S}from"./clock-Du1LHGOf.js";/* empty css            */import"./index-C8kC-DJp.js";import"./index-DH1-xokN.js";import"./index-u1-Hf6Gb.js";import"./index-DW9AIAM8.js";import"./log-out-Duux9n8I.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],R=v("MapPin",q);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],I=v("User",z),ae=({analisis:i,campus:_})=>{const[s,b]=w.useState(i.length>0?i[0]:null),x=a=>{switch(a){case"vigente":return"bg-green-100 text-green-800";case"por_vencer":return"bg-yellow-100 text-yellow-800";case"vencido":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},h=a=>{switch(a){case"vigente":return e.jsx(N,{className:"w-4 h-4"});case"por_vencer":return e.jsx(S,{className:"w-4 h-4"});case"vencido":return e.jsx(f,{className:"w-4 h-4"});default:return e.jsx(g,{className:"w-4 h-4"})}},c=a=>a?new Date(a).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}):"No especificada",y=async a=>{try{(await fetch("/documentos/analisis/reanalizar",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({archivo_id:a})})).ok&&window.location.reload()}catch(j){console.error("Error en reanálisis:",j)}};return e.jsxs(A,{breadcrumbs:[{title:"Dashboard",href:"/dashboard"},{title:"Documentos",href:"/documentos"},{title:"Análisis IA",href:"/documentos/analisis"}],children:[e.jsx(C,{title:"Análisis de Documentos IA"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 p-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight mb-2",children:[e.jsx(d,{className:"inline w-8 h-8 mr-2 text-blue-600"}),"Análisis Inteligente de Documentos"]}),e.jsxs("p",{className:"text-muted-foreground",children:["Resultados del análisis automático con IA para el campus: ",e.jsx("strong",{children:_?.Campus})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(l,{children:[e.jsx(u,{children:e.jsx(p,{className:"text-lg",children:"Documentos Analizados"})}),e.jsx(n,{children:e.jsxs("div",{className:"space-y-3",children:[i.map(a=>e.jsx("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${s?.id===a.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>b(a),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm truncate",children:a.documento.nombre_detectado}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:a.archivo_nombre}),e.jsx("p",{className:"text-xs text-muted-foreground",children:c(a.fecha_analisis)})]}),e.jsx("div",{className:"ml-2",children:e.jsxs(r,{className:`text-xs ${x(a.estado_sistema.estado_calculado)}`,children:[h(a.estado_sistema.estado_calculado),e.jsx("span",{className:"ml-1",children:a.estado_sistema.estado_calculado})]})})]})},a.id)),i.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(d,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No hay análisis disponibles"}),e.jsx("p",{className:"text-xs",children:"Los documentos aparecerán aquí después de ser analizados"})]})]})})]})}),e.jsx("div",{className:"lg:col-span-2",children:s?e.jsxs(l,{children:[e.jsx(u,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(p,{className:"text-xl",children:s.documento.nombre_detectado}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>y(s.id),children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Reanalizar"]}),e.jsxs(o,{variant:"outline",size:"sm",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Ver PDF"]}),e.jsxs(o,{variant:"outline",size:"sm",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Descargar"]})]})]})}),e.jsx(n,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(g,{className:"w-5 h-5"}),"Información del Documento"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{children:"Tipo Detectado"}),e.jsx("p",{className:"text-sm font-medium",children:s.documento.nombre_detectado})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Coincide con Catálogo"}),e.jsx(r,{className:s.documento.coincide_catalogo?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:s.documento.coincide_catalogo?"Sí":"No"})]})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Descripción"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.documento.descripcion})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Cumple Requisitos"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(r,{className:s.documento.cumple_requisitos?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:[s.documento.cumple_requisitos?e.jsx(N,{className:"w-3 h-3 mr-1"}):e.jsx(f,{className:"w-3 h-3 mr-1"}),s.documento.cumple_requisitos?"Cumple":"No cumple"]})})]}),s.documento.observaciones&&e.jsxs("div",{children:[e.jsx(t,{children:"Observaciones"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.documento.observaciones})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(m,{className:"w-5 h-5"}),"Metadatos Extraídos"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{children:"Folio"}),e.jsx("p",{className:"text-sm font-medium",children:s.metadatos.folio_documento||"No detectado"})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Entidad Emisora"}),e.jsx("p",{className:"text-sm font-medium",children:s.metadatos.entidad_emisora||"No detectada"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{children:"Fecha de Expedición"}),e.jsxs("p",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(m,{className:"w-4 h-4"}),c(s.metadatos.fecha_expedicion)]})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Vigencia"}),e.jsxs("p",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(m,{className:"w-4 h-4"}),c(s.metadatos.vigencia_documento)]})]})]}),s.metadatos.lugar_expedicion&&e.jsxs("div",{children:[e.jsx(t,{children:"Lugar de Expedición"}),e.jsxs("p",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(R,{className:"w-4 h-4"}),s.metadatos.lugar_expedicion]})]}),s.metadatos.nombre_perito&&e.jsxs("div",{children:[e.jsx(t,{children:"Nombre del Perito"}),e.jsxs("p",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(I,{className:"w-4 h-4"}),s.metadatos.nombre_perito]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(d,{className:"w-5 h-5"}),"Estado del Sistema"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{children:"Estado Calculado"}),e.jsxs(r,{className:x(s.estado_sistema.estado_calculado),children:[h(s.estado_sistema.estado_calculado),e.jsx("span",{className:"ml-1",children:s.estado_sistema.estado_calculado})]})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Requiere Vigencia"}),e.jsx("p",{className:"text-sm font-medium",children:s.estado_sistema.requiere_vigencia?"Sí":"No"})]})]}),s.metadatos.dias_restantes_vigencia!==null&&e.jsxs("div",{children:[e.jsx(t,{children:"Días Restantes de Vigencia"}),e.jsxs("p",{className:`text-sm font-medium ${s.metadatos.dias_restantes_vigencia<0?"text-red-600":s.metadatos.dias_restantes_vigencia<=30?"text-orange-600":"text-green-600"}`,children:[s.metadatos.dias_restantes_vigencia," días"]})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Fecha de Análisis"}),e.jsx("p",{className:"text-sm font-medium",children:c(s.fecha_analisis)})]})]})]})]})})]}):e.jsx(l,{children:e.jsx(n,{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx(d,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"Selecciona un documento para ver su análisis"}),e.jsx("p",{className:"text-sm",children:"Los detalles del análisis IA aparecerán aquí"})]})})})})]})]})]})};export{ae as default};
