import{u as k,a as D,j as e,H as E}from"./app-EX_mZ9mw.js";import{A}from"./app-layout-Cc_wIga_.js";import{C as i,a as c,b as d,c as n}from"./card-DFbCzKUp.js";import{B as x}from"./badge-DnmQQSdU.js";import{B as h}from"./button-BiAoqVgi.js";import{B}from"./building-DPeM5xdR.js";import{F as m,C as y}from"./file-text-CSMsqOAE.js";import{T as v}from"./triangle-alert-BW0ZJ0Xk.js";import{E as w}from"./eye-BBfYpstQ.js";import{D as C}from"./download-JqnH_k14.js";import{C as L}from"./circle-x-BukMhSIb.js";import{C as T}from"./clock-Dvm0EntV.js";/* empty css            */import"./index-Cds7o5_J.js";import"./index-CKdw7pxK.js";import"./createLucideIcon-3LYQ82pi.js";import"./index-u1-Hf6Gb.js";import"./index-DW9AIAM8.js";import"./log-out-BQlgGxVw.js";function ee(){const{campus:p,documentos:o,documentos_agrupados:j,estadisticas:t}=k().props,[U,z]=D.useState(!1),_=[{title:"Dashboard",href:"/supervision"},{title:"Supervisión",href:"/supervision"},{title:p?.Campus||"Campus",href:"#"}],u=async s=>{if(s.url_descarga&&s.puede_descargar)try{const r=await(await fetch(s.url_descarga)).blob(),b=window.URL.createObjectURL(r),l=document.createElement("a");l.href=b,l.download=`${s.nombre||"documento"}.pdf`,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(b)}catch(a){console.error("Error al descargar:",a);const r=document.createElement("a");r.href=s.url_descarga,r.download=s.nombre||"documento.pdf",document.body.appendChild(r),r.click(),document.body.removeChild(r)}},g=s=>{s.url_ver&&window.open(s.url_ver,"_blank")},N=s=>{const a={aprobado:"bg-green-100 text-green-800",pendiente:"bg-yellow-100 text-yellow-800",vencido:"bg-red-100 text-red-800",rechazado:"bg-red-100 text-red-800"};return e.jsx(x,{className:a[s]||"bg-gray-100 text-gray-800",children:s.charAt(0).toUpperCase()+s.slice(1)})},f=s=>{switch(s){case"aprobado":return e.jsx(y,{className:"h-4 w-4 text-green-600"});case"pendiente":return e.jsx(T,{className:"h-4 w-4 text-yellow-600"});case"vencido":return e.jsx(v,{className:"h-4 w-4 text-red-600"});case"rechazado":return e.jsx(L,{className:"h-4 w-4 text-red-600"});default:return e.jsx(m,{className:"h-4 w-4 text-gray-600"})}};return e.jsxs(A,{breadcrumbs:_,children:[e.jsx(E,{title:`Campus ${p?.Campus||"Campus"} - Supervisión`}),e.jsxs("div",{className:"h-full w-full p-6 pl-8 pr-8 space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(B,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Campus ",p?.Campus||"Campus"]}),e.jsx("p",{className:"text-gray-600",children:"Supervisión de documentos"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(i,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Total Documentos"}),e.jsx(m,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t?.documentos?.total||o?.length||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t?.documentos?.pendientes||0," pendientes"]})]})]}),e.jsxs(i,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Documentos Aprobados"}),e.jsx(y,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t?.documentos?.aprobados||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t?.documentos?.cumplimiento||0,"% cumplimiento"]})]})]}),e.jsxs(i,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Documentos Vencidos"}),e.jsx(v,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t?.documentos?.vencidos||0}),e.jsx("p",{className:"text-xs text-red-600",children:"Requieren atención"})]})]})]}),e.jsx("div",{className:"space-y-8",children:j&&j.length>0?j.map(s=>e.jsxs(i,{className:"shadow-sm border border-gray-200",children:[e.jsx(c,{className:"bg-gray-50/50 border-b border-gray-100 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(m,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs(d,{className:"text-lg font-semibold text-gray-800",children:["Tipo: ",s.tipo]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[s.total," ",s.total===1?"documento":"documentos"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(x,{variant:"outline",className:"text-xs font-medium",children:s.total}),e.jsx(x,{className:"bg-green-50 text-green-700 border-green-200 text-xs",children:s.aprobados}),e.jsx(x,{className:"bg-yellow-50 text-yellow-700 border-yellow-200 text-xs",children:s.pendientes}),s.vencidos>0&&e.jsx(x,{className:"bg-red-50 text-red-700 border-red-200 text-xs",children:s.vencidos})]})]})}),e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Documento"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fechas"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.documentos.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[f(a.estado),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:a.nombre}),a.carrera&&e.jsx("p",{className:"text-xs text-gray-500 truncate",children:a.carrera})]})]})}),e.jsx("td",{className:"px-6 py-4",children:N(a.estado)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{children:["Subido: ",a.fecha_subida]}),a.fecha_vencimiento&&e.jsxs("div",{children:["Vence: ",a.fecha_vencimiento]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:a.usuario||""}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>a.url_ver?g(a):null,disabled:!a.url_ver,className:`h-8 w-8 p-0 ${a.url_ver?"hover:bg-blue-100 hover:text-blue-700":"opacity-50 cursor-not-allowed"}`,title:"Ver documento",children:e.jsx(w,{className:"h-4 w-4"})}),e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>a.url_descarga?u(a):null,disabled:!a.puede_descargar||!a.url_descarga,className:`h-8 w-8 p-0 ${!a.puede_descargar||!a.url_descarga?"opacity-50 cursor-not-allowed":"hover:bg-green-100 hover:text-green-700"}`,title:"Descargar documento",children:e.jsx(C,{className:"h-4 w-4"})})]})})]},a.id))})]})}),s.documentos.some(a=>a.observaciones)&&e.jsxs("div",{className:"mt-6 border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Observaciones"}),e.jsx("div",{className:"space-y-2",children:s.documentos.filter(a=>a.observaciones).map(a=>e.jsxs("div",{className:"text-xs text-gray-600 bg-gray-50 p-2 rounded",children:[e.jsxs("span",{className:"font-medium",children:[a.nombre,":"]})," ",a.observaciones]},a.id))})]})]})})]},s.tipo)):e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center",children:[e.jsx(m,{className:"h-5 w-5 mr-2"}),"Documentos del Campus"]})}),e.jsx(n,{children:o&&o.length>0?e.jsx("div",{className:"space-y-3",children:o.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[f(s.estado),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:s.nombre}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 mt-1",children:[e.jsxs("span",{children:["Tipo: ",s.tipo]}),e.jsxs("span",{children:["Subido: ",s.fecha_subida]}),e.jsxs("span",{children:["Usuario: ",s.usuario||""]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[N(s.estado),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>s.url_ver?g(s):null,disabled:!s.url_ver,className:`h-8 px-3 ${s.url_ver?"":"opacity-50 cursor-not-allowed"}`,children:[e.jsx(w,{className:"h-4 w-4 mr-1"}),"Ver ",!s.url_ver&&"(N/A)"]}),e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>s.url_descarga?u(s):null,disabled:!s.puede_descargar||!s.url_descarga,className:`h-8 px-3 ${!s.puede_descargar||!s.url_descarga?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx(C,{className:"h-4 w-4 mr-1"}),"Descargar ",(!s.puede_descargar||!s.url_descarga)&&"(N/A)"]})]})]})]},s.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(m,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No hay documentos disponibles"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Los documentos aparecerán aquí cuando estén disponibles"})]})})]})})]})]})}export{ee as default};
