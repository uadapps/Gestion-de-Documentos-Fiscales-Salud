import{a as t,j as V}from"./app-D8A6MmTC.js";import{c as ae}from"./button-BGV-kG6u.js";import{c as Ze}from"./createLucideIcon-B7odIqhP.js";import{q as _}from"./index-DW9AIAM8.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["path",{d:"M5 12h14",key:"1ays0h"}]],Ye=Ze("Minus",Ue);var et=Object.defineProperty,tt=Object.defineProperties,rt=Object.getOwnPropertyDescriptors,ue=Object.getOwnPropertySymbols,De=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable,Te=(e,r,o)=>r in e?et(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o,nt=(e,r)=>{for(var o in r||(r={}))De.call(r,o)&&Te(e,o,r[o]);if(ue)for(var o of ue(r))Fe.call(r,o)&&Te(e,o,r[o]);return e},ot=(e,r)=>tt(e,rt(r)),lt=(e,r)=>{var o={};for(var a in e)De.call(e,a)&&r.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&ue)for(var a of ue(e))r.indexOf(a)<0&&Fe.call(e,a)&&(o[a]=e[a]);return o};function at(e){let r=setTimeout(e,0),o=setTimeout(e,10),a=setTimeout(e,50);return[r,o,a]}function ut(e){let r=t.useRef();return t.useEffect(()=>{r.current=e}),r.current}var st=18,Ae=40,it=`${Ae}px`,ct=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function dt({containerRef:e,inputRef:r,pushPasswordManagerStrategy:o,isFocused:a}){let[j,s]=t.useState(!1),[Q,v]=t.useState(!1),[W,q]=t.useState(!1),I=t.useMemo(()=>o==="none"?!1:(o==="increase-width"||o==="experimental-no-flickering")&&j&&Q,[j,Q,o]),y=t.useCallback(()=>{let b=e.current,F=r.current;if(!b||!F||W||o==="none")return;let E=b,i=E.getBoundingClientRect().left+E.offsetWidth,J=E.getBoundingClientRect().top+E.offsetHeight/2,c=i-st,U=J;document.querySelectorAll(ct).length===0&&document.elementFromPoint(c,U)===b||(s(!0),q(!0))},[e,r,W,o]);return t.useEffect(()=>{let b=e.current;if(!b||o==="none")return;function F(){let i=window.innerWidth-b.getBoundingClientRect().right;v(i>=Ae)}F();let E=setInterval(F,1e3);return()=>{clearInterval(E)}},[e,o]),t.useEffect(()=>{let b=a||document.activeElement===r.current;if(o==="none"||!b)return;let F=setTimeout(y,0),E=setTimeout(y,2e3),i=setTimeout(y,5e3),J=setTimeout(()=>{q(!0)},6e3);return()=>{clearTimeout(F),clearTimeout(E),clearTimeout(i),clearTimeout(J)}},[r,a,o,y]),{hasPWMBadge:j,willPushPWMBadge:I,PWM_BADGE_SPACE_WIDTH:it}}var _e=t.createContext({}),Qe=t.forwardRef((e,r)=>{var o=e,{value:a,onChange:j,maxLength:s,textAlign:Q="left",pattern:v,placeholder:W,inputMode:q="numeric",onComplete:I,pushPasswordManagerStrategy:y="increase-width",pasteTransformer:b,containerClassName:F,noScriptCSSFallback:E=mt,render:i,children:J}=o,c=lt(o,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),U,be,we,Ee,Ce;let[He,Le]=t.useState(typeof c.defaultValue=="string"?c.defaultValue:""),d=a??He,L=ut(d),Y=t.useCallback(n=>{j?.(n),Le(n)},[j]),A=t.useMemo(()=>v?typeof v=="string"?new RegExp(v):v:null,[v]),m=t.useRef(null),se=t.useRef(null),ie=t.useRef({value:d,onChange:Y,isIOS:typeof window<"u"&&((be=(U=window?.CSS)==null?void 0:U.supports)==null?void 0:be.call(U,"-webkit-touch-callout","none"))}),oe=t.useRef({prev:[(we=m.current)==null?void 0:we.selectionStart,(Ee=m.current)==null?void 0:Ee.selectionEnd,(Ce=m.current)==null?void 0:Ce.selectionDirection]});t.useImperativeHandle(r,()=>m.current,[]),t.useEffect(()=>{let n=m.current,l=se.current;if(!n||!l)return;ie.current.value!==n.value&&ie.current.onChange(n.value),oe.current.prev=[n.selectionStart,n.selectionEnd,n.selectionDirection];function p(){if(document.activeElement!==n){te(null),re(null);return}let u=n.selectionStart,C=n.selectionEnd,le=n.selectionDirection,k=n.maxLength,G=n.value,N=oe.current.prev,B=-1,H=-1,K;if(G.length!==0&&u!==null&&C!==null){let Ve=u===C,Je=u===G.length&&G.length<k;if(Ve&&!Je){let z=u;if(z===0)B=0,H=1,K="forward";else if(z===k)B=z-1,H=z,K="backward";else if(k>1&&G.length>1){let me=0;if(N[0]!==null&&N[1]!==null){K=z<N[1]?"backward":"forward";let Xe=N[0]===N[1]&&N[0]<k;K==="backward"&&!Xe&&(me=-1)}B=me+z,H=me+z+1}}B!==-1&&H!==-1&&B!==H&&m.current.setSelectionRange(B,H,K)}let Me=B!==-1?B:u,Re=H!==-1?H:C,ze=K??le;te(Me),re(Re),oe.current.prev=[Me,Re,ze]}if(document.addEventListener("selectionchange",p,{capture:!0}),p(),document.activeElement===n&&ce(!0),!document.getElementById("input-otp-style")){let u=document.createElement("style");if(u.id="input-otp-style",document.head.appendChild(u),u.sheet){let C="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";ne(u.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),ne(u.sheet,`[data-input-otp]:autofill { ${C} }`),ne(u.sheet,`[data-input-otp]:-webkit-autofill { ${C} }`),ne(u.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),ne(u.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let x=()=>{l&&l.style.setProperty("--root-height",`${n.clientHeight}px`)};x();let P=new ResizeObserver(x);return P.observe(n),()=>{document.removeEventListener("selectionchange",p,{capture:!0}),P.disconnect()}},[]);let[Se,xe]=t.useState(!1),[ee,ce]=t.useState(!1),[$,te]=t.useState(null),[X,re]=t.useState(null);t.useEffect(()=>{at(()=>{var n,l,p,x;(n=m.current)==null||n.dispatchEvent(new Event("input"));let P=(l=m.current)==null?void 0:l.selectionStart,u=(p=m.current)==null?void 0:p.selectionEnd,C=(x=m.current)==null?void 0:x.selectionDirection;P!==null&&u!==null&&(te(P),re(u),oe.current.prev=[P,u,C])})},[d,ee]),t.useEffect(()=>{L!==void 0&&d!==L&&L.length<s&&d.length===s&&I?.(d)},[s,I,L,d]);let Z=dt({containerRef:se,inputRef:m,pushPasswordManagerStrategy:y,isFocused:ee}),Pe=t.useCallback(n=>{let l=n.currentTarget.value.slice(0,s);if(l.length>0&&A&&!A.test(l)){n.preventDefault();return}typeof L=="string"&&l.length<L.length&&document.dispatchEvent(new Event("selectionchange")),Y(l)},[s,Y,L,A]),je=t.useCallback(()=>{var n;if(m.current){let l=Math.min(m.current.value.length,s-1),p=m.current.value.length;(n=m.current)==null||n.setSelectionRange(l,p),te(l),re(p)}ce(!0)},[s]),ke=t.useCallback(n=>{var l,p;let x=m.current;if(!b&&(!ie.current.isIOS||!n.clipboardData||!x))return;let P=n.clipboardData.getData("text/plain"),u=b?b(P):P;n.preventDefault();let C=(l=m.current)==null?void 0:l.selectionStart,le=(p=m.current)==null?void 0:p.selectionEnd,k=(C!==le?d.slice(0,C)+u+d.slice(le):d.slice(0,C)+u+d.slice(C)).slice(0,s);if(k.length>0&&A&&!A.test(k))return;x.value=k,Y(k);let G=Math.min(k.length,s-1),N=k.length;x.setSelectionRange(G,N),te(G),re(N)},[s,Y,A,d]),$e=t.useMemo(()=>({position:"relative",cursor:c.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[c.disabled]),Oe=t.useMemo(()=>({position:"absolute",inset:0,width:Z.willPushPWMBadge?`calc(100% + ${Z.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:Z.willPushPWMBadge?`inset(0 ${Z.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:Q,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[Z.PWM_BADGE_SPACE_WIDTH,Z.willPushPWMBadge,Q]),Ge=t.useMemo(()=>t.createElement("input",ot(nt({autoComplete:c.autoComplete||"one-time-code"},c),{"data-input-otp":!0,"data-input-otp-placeholder-shown":d.length===0||void 0,"data-input-otp-mss":$,"data-input-otp-mse":X,inputMode:q,pattern:A?.source,"aria-placeholder":W,style:Oe,maxLength:s,value:d,ref:m,onPaste:n=>{var l;ke(n),(l=c.onPaste)==null||l.call(c,n)},onChange:Pe,onMouseOver:n=>{var l;xe(!0),(l=c.onMouseOver)==null||l.call(c,n)},onMouseLeave:n=>{var l;xe(!1),(l=c.onMouseLeave)==null||l.call(c,n)},onFocus:n=>{var l;je(),(l=c.onFocus)==null||l.call(c,n)},onBlur:n=>{var l;ce(!1),(l=c.onBlur)==null||l.call(c,n)}})),[Pe,je,ke,q,Oe,s,X,$,c,A?.source,d]),de=t.useMemo(()=>({slots:Array.from({length:s}).map((n,l)=>{var p;let x=ee&&$!==null&&X!==null&&($===X&&l===$||l>=$&&l<X),P=d[l]!==void 0?d[l]:null,u=d[0]!==void 0?null:(p=W?.[l])!=null?p:null;return{char:P,placeholderChar:u,isActive:x,hasFakeCaret:x&&P===null}}),isFocused:ee,isHovering:!c.disabled&&Se}),[ee,Se,s,X,$,c.disabled,d]),Ke=t.useMemo(()=>i?i(de):t.createElement(_e.Provider,{value:de},J),[J,de,i]);return t.createElement(t.Fragment,null,E!==null&&t.createElement("noscript",null,t.createElement("style",null,E)),t.createElement("div",{ref:se,"data-input-otp-container":!0,style:$e,className:F},Ke,t.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},Ge)))});Qe.displayName="Input";function ne(e,r){try{e.insertRule(r)}catch{console.error("input-otp could not insert CSS rule:",r)}}var mt=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`,Ct="^\\d+$";const pt=t.forwardRef(({className:e,containerClassName:r,...o},a)=>V.jsx(Qe,{ref:a,containerClassName:ae("flex items-center gap-2 has-[:disabled]:opacity-50",r),className:ae("disabled:cursor-not-allowed",e),...o}));pt.displayName="InputOTP";const ht=t.forwardRef(({className:e,...r},o)=>V.jsx("div",{ref:o,className:ae("flex items-center",e),...r}));ht.displayName="InputOTPGroup";const ft=t.forwardRef(({index:e,className:r,...o},a)=>{const j=t.useContext(_e),{char:s,hasFakeCaret:Q,isActive:v}=j.slots[e];return V.jsxs("div",{ref:a,className:ae("relative flex h-9 w-9 items-center justify-center border-y border-r border-input text-sm shadow-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",v&&"z-10 ring-1 ring-ring",r),...o,children:[s,Q&&V.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:V.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});ft.displayName="InputOTPSlot";const gt=t.forwardRef(({...e},r)=>V.jsx("div",{ref:r,role:"separator",...e,children:V.jsx(Ye,{})}));gt.displayName="InputOTPSeparator";const O=e=>({url:O.url(e),method:"post"});O.definition={methods:["post"],url:"/two-factor-challenge"};O.url=e=>O.definition.url+_(e);O.post=e=>({url:O.url(e),method:"post"});const qe=e=>({action:O.url(e),method:"post"});qe.post=e=>({action:O.url(e),method:"post"});O.form=qe;const vt={store:Object.assign(O,O)},S=e=>({url:S.url(e),method:"get"});S.definition={methods:["get","head"],url:"/two-factor-challenge"};S.url=e=>S.definition.url+_(e);S.get=e=>({url:S.url(e),method:"get"});S.head=e=>({url:S.url(e),method:"head"});const he=e=>({action:S.url(e),method:"get"});he.get=e=>({action:S.url(e),method:"get"});he.head=e=>({action:S.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});S.form=he;const M=e=>({url:M.url(e),method:"post"});M.definition={methods:["post"],url:"/user/two-factor-authentication"};M.url=e=>M.definition.url+_(e);M.post=e=>({url:M.url(e),method:"post"});const Ie=e=>({action:M.url(e),method:"post"});Ie.post=e=>({action:M.url(e),method:"post"});M.form=Ie;const R=e=>({url:R.url(e),method:"post"});R.definition={methods:["post"],url:"/user/confirmed-two-factor-authentication"};R.url=e=>R.definition.url+_(e);R.post=e=>({url:R.url(e),method:"post"});const Ne=e=>({action:R.url(e),method:"post"});Ne.post=e=>({action:R.url(e),method:"post"});R.form=Ne;const T=e=>({url:T.url(e),method:"delete"});T.definition={methods:["delete"],url:"/user/two-factor-authentication"};T.url=e=>T.definition.url+_(e);T.delete=e=>({url:T.url(e),method:"delete"});const We=e=>({action:T.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...e?.query??e?.mergeQuery??{}}}),method:"post"});We.delete=e=>({action:T.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...e?.query??e?.mergeQuery??{}}}),method:"post"});T.form=We;const h=e=>({url:h.url(e),method:"get"});h.definition={methods:["get","head"],url:"/user/two-factor-qr-code"};h.url=e=>h.definition.url+_(e);h.get=e=>({url:h.url(e),method:"get"});h.head=e=>({url:h.url(e),method:"head"});const fe=e=>({action:h.url(e),method:"get"});fe.get=e=>({action:h.url(e),method:"get"});fe.head=e=>({action:h.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});h.form=fe;const f=e=>({url:f.url(e),method:"get"});f.definition={methods:["get","head"],url:"/user/two-factor-secret-key"};f.url=e=>f.definition.url+_(e);f.get=e=>({url:f.url(e),method:"get"});f.head=e=>({url:f.url(e),method:"head"});const ge=e=>({action:f.url(e),method:"get"});ge.get=e=>({action:f.url(e),method:"get"});ge.head=e=>({action:f.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});f.form=ge;const g=e=>({url:g.url(e),method:"get"});g.definition={methods:["get","head"],url:"/user/two-factor-recovery-codes"};g.url=e=>g.definition.url+_(e);g.get=e=>({url:g.url(e),method:"get"});g.head=e=>({url:g.url(e),method:"head"});const ve=e=>({action:g.url(e),method:"get"});ve.get=e=>({action:g.url(e),method:"get"});ve.head=e=>({action:g.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});g.form=ve;const D=e=>({url:D.url(e),method:"post"});D.definition={methods:["post"],url:"/user/two-factor-recovery-codes"};D.url=e=>D.definition.url+_(e);D.post=e=>({url:D.url(e),method:"post"});const Be=e=>({action:D.url(e),method:"post"});Be.post=e=>({action:D.url(e),method:"post"});D.form=Be;const w=e=>({url:w.url(e),method:"get"});w.definition={methods:["get","head"],url:"/settings/two-factor"};w.url=e=>w.definition.url+_(e);w.get=e=>({url:w.url(e),method:"get"});w.head=e=>({url:w.url(e),method:"head"});const ye=e=>({action:w.url(e),method:"get"});ye.get=e=>({action:w.url(e),method:"get"});ye.head=e=>({action:w.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});w.form=ye;Object.assign(S,vt),Object.assign(M,M),Object.assign(R,R),Object.assign(T,T),Object.assign(h,h),Object.assign(f,f),Object.assign(g,g),Object.assign(D,D),Object.assign(w,w);const St=6,pe=async e=>{const r=await fetch(e,{headers:{Accept:"application/json"}});if(!r.ok)throw new Error(`Failed to fetch: ${r.status}`);return r.json()},xt=()=>{const[e,r]=t.useState(null),[o,a]=t.useState(null),[j,s]=t.useState([]),[Q,v]=t.useState([]),W=t.useMemo(()=>e!==null&&o!==null,[e,o]),q=t.useCallback(async()=>{try{const{svg:i}=await pe(h.url());r(i)}catch{v(i=>[...i,"Failed to fetch QR code"]),r(null)}},[]),I=t.useCallback(async()=>{try{const{secretKey:i}=await pe(f.url());a(i)}catch{v(i=>[...i,"Failed to fetch a setup key"]),a(null)}},[]),y=t.useCallback(()=>{v([])},[]),b=t.useCallback(()=>{a(null),r(null),y()},[y]),F=t.useCallback(async()=>{try{y();const i=await pe(g.url());s(i)}catch{v(i=>[...i,"Failed to fetch recovery codes"]),s([])}},[y]),E=t.useCallback(async()=>{try{y(),await Promise.all([q(),I()])}catch{r(null),a(null)}},[y,q,I]);return{qrCodeSvg:e,manualSetupKey:o,recoveryCodesList:j,hasSetupData:W,errors:Q,clearErrors:y,clearSetupData:b,fetchQrCode:q,fetchSetupKey:I,fetchSetupData:E,fetchRecoveryCodes:F}};export{pt as I,Ct as K,St as O,ht as a,ft as b,R as c,w as d,T as e,M as f,D as r,O as s,xt as u};
