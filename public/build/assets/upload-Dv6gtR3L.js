import{u as ns,a as m,c as Oe,j as e,H as is}from"./app-BpGYFxt4.js";import{A as cs,X as pe,C as L,U as te,M as ga,B as ae}from"./app-layout-CWsd8uKz.js";import{C as I,c as $,a as be,b as je}from"./card-CwUnHOlq.js";import{B as z}from"./button-CL0MAPb-.js";import{P as fa}from"./progress-CLlqutw6.js";import{I as ds}from"./input-CgHf7pgV.js";import{L as qe}from"./label-C7XdWxwB.js";import{S as Ve,a as Le,b as Be,c as Ge,d as ve,O as ls}from"./ObservacionesModal-BXkdsFN_.js";import{C as U,F as W}from"./file-text-D_-xijLA.js";import{L as se}from"./loader-circle-1ro2yZSK.js";import{C as ja}from"./clock-__SUieMi.js";import{C as Y}from"./calendar-DLvItzEZ.js";import{c as va}from"./createLucideIcon-C3MB8Pmr.js";import{B as Na}from"./brain-D9Nv7DHW.js";import{E as pa}from"./eye-BgOUa1nb.js";/* empty css            */import"./index-Bk1YBujv.js";import"./index-F78BPGYV.js";import"./index-DW9AIAM8.js";import"./log-out-BqwYYmBV.js";import"./dialog-4s6OCBIW.js";import"./check-GE6g_B1Y.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],us=va("Plus",ms);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],hs=va("Search",xs),gs=u=>{switch(u){case"pendiente":return"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-400 border-yellow-200 dark:border-yellow-800";case"subido":return"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400 border-blue-200 dark:border-blue-800";case"vigente":return"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400 border-green-200 dark:border-green-800";case"caducado":return"bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-400 border-orange-200 dark:border-orange-800";case"rechazado":return"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400 border-red-200 dark:border-red-800";default:return"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-300 border-gray-200 dark:border-gray-700"}},fs=u=>{switch(u){case"pendiente":return e.jsx(ja,{className:"w-4 h-4"});case"subido":return e.jsx(te,{className:"w-4 h-4"});case"vigente":return e.jsx(U,{className:"w-4 h-4"});case"caducado":return e.jsx(Y,{className:"w-4 h-4"});case"rechazado":return e.jsx(L,{className:"w-4 h-4"});case"subiendo":return e.jsx(te,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 animate-pulse"});case"procesando":return e.jsx(se,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400 animate-spin"});case"analizando":return e.jsx(Na,{className:"w-4 h-4 text-purple-600 dark:text-purple-400 animate-pulse"});case"completado":return e.jsx(U,{className:"w-4 h-4 text-green-600 dark:text-green-400"});case"error":return e.jsx(L,{className:"w-4 h-4 text-red-600 dark:text-red-400"});default:return e.jsx(W,{className:"w-4 h-4"})}},Ke=u=>{if(!u||u===0||isNaN(u))return"0 Bytes";const x=1024,v=["Bytes","KB","MB","GB"],F=Math.floor(Math.log(u)/Math.log(x));return parseFloat((u/Math.pow(x,F)).toFixed(2))+" "+v[F]},Ne=u=>{if(!u)return"Fecha no disponible";try{let x;if(u.includes("-"))if(u.match(/^\d{4}-\d{2}-\d{2}$/)){const[v,F,re]=u.split("-");x=new Date(parseInt(v),parseInt(F)-1,parseInt(re))}else x=new Date(u);else isNaN(Number(u))?x=new Date(u):x=new Date(Number(u));return isNaN(x.getTime())?"Fecha inv√°lida":x.toLocaleDateString("es-MX",{year:"numeric",month:"long",day:"numeric"})}catch(x){return console.error("Error formateando fecha:",u,x),"Fecha inv√°lida"}},ba=u=>{const x=u.fechaExpedicion,v=u.vigenciaDocumento;if(u.diasRestantesVigencia,!x&&!v)return`${Ke(u.tama√±o||0)} ‚Ä¢ ${Ne(u.fechaSubida)}`;let F=Ke(u.tama√±o||0);return x&&(F+=` ‚Ä¢ ${Ne(x)}`),F},Ue=u=>{const x=u.archivos?.find(v=>v.estado==="completado"&&(v.metadata?.vigencia_documento||v.vigenciaDocumento));if(x){const v=x.metadata?.vigencia_documento||x.vigenciaDocumento;if(v){const F=new Date(v),re=new Date,Xe=F.getTime()-re.getTime(),le=Math.ceil(Xe/(1e3*60*60*24));return{fecha:v,diasRestantes:le,esVigenciaReal:!0}}}return{fecha:u.fechaLimite,diasRestantes:null,esVigenciaReal:!1}},Vs=({campusDelDirector:u,documentosRequeridos:x,campusSeleccionado:v,error:F})=>{const{auth:re}=ns().props,le=re?.user?.roles||[],ya=(Array.isArray(le)?le.map(a=>a.rol||a.ID_Rol||a.nombre):[]).some(a=>a==="14"||a===14||a==="16"||a===16),[g,He]=m.useState(v),Je=(x||[]).map(a=>({...a,archivos:a.archivos||[]})),[D,B]=m.useState(Je),[Qe,ye]=m.useState(null),[oe,ne]=m.useState({}),[n,_]=m.useState(Je[0]||null),[M,ke]=m.useState("todos"),me=m.useRef(null),[ie,ka]=m.useState(""),[wa,we]=m.useState(!1),[Ca,Ce]=m.useState(null),[_a,_e]=m.useState(""),[Da,De]=m.useState({}),[Sa,Se]=m.useState(!1),[ze,Ae]=m.useState(0),[za,ce]=m.useState(!1),[We,R]=m.useState(0),[Aa,E]=m.useState(""),[Ye,ue]=m.useState(""),[K,xe]=m.useState(!1),[Ee,he]=m.useState(0),[Ea,Ie]=m.useState(0),[Ia,Ze]=m.useState(new Set),[$a,$e]=m.useState(!1),[Ta,Ra]=m.useState(""),[ea,Pa]=m.useState(!1),[aa,N]=m.useState(!1),[Fa,y]=m.useState(!1),[Ma,de]=m.useState(!1),[G,sa]=m.useState(null);m.useEffect(()=>{if(console.log("üîÑ Sincronizando estado con props de Inertia:",{documentosIniciales:x?.length,campusInicial:v?.ID_Campus}),x&&x.length>0){const a=x.map(r=>({...r,archivos:r.archivos||[]}));B(a),!n&&a.length>0&&_(a[0])}v&&(ea||He(v))},[x,v,ea]),m.useEffect(()=>{const a=sessionStorage.getItem("campus_from_notification");if(a&&u){const r=u.find(t=>t.ID_Campus===a);r&&(console.log("üîî Campus desde notificaci√≥n:",r),Pa(!0),Re(r.ID_Campus),sessionStorage.removeItem("campus_from_notification"),sessionStorage.removeItem("highlight_doc_from_notification"))}},[]);const f=a=>a.uniqueKey||a.id,P=a=>a.archivos||[],Oa=a=>{const r=P(a);if(r.length===0)return!0;const t=A(a),s=w(t);return s==="vigente"&&!k(a)?!1:s==="caducado"||k(a)?!0:!(r.find(c=>c.estado==="completado"&&(!c.validacionIA||c.validacionIA.coincide))&&t!=="rechazado")},ta=async()=>{if(g)try{const r=await(await fetch(`/observaciones/campus/${g.ID_Campus}/todas`,{headers:{Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}})).json();if(r.success&&r.observaciones){const t={};let s=0;r.observaciones.forEach(i=>{i.estatus==="pendiente"&&(i.documento_informacion_id?t[i.documento_informacion_id]=(t[i.documento_informacion_id]||0)+1:s++)}),De(t),Ae(s)}}catch(a){console.error("Error al cargar conteo de observaciones:",a)}},qa=(a,r)=>{Ce(a),_e(r),Se(!1),we(!0)},Va=()=>{Ce(null),_e(""),Se(!0),we(!0)},La=()=>{we(!1),Ce(null),_e(""),Se(!1),ta(),window.dispatchEvent(new Event("observaciones-updated"))};m.useEffect(()=>{g&&ta()},[g?.ID_Campus]);const Te=async()=>{if(g)try{O==="medicos"?await Ga():await Ba()}catch(a){console.error("Error al refrescar documentos:",a),N(!1),y(!0),fe(!1)}},Ba=async()=>{if(g)try{N(!0),y(!1);const[a,r]=await Promise.all([fetch(`/documentos/upload?campus=${g.ID_Campus}`,{method:"GET",headers:{Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}}),fetch(`/observaciones/campus/${g.ID_Campus}/todas`,{headers:{Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}})]);if(r.ok){const t=await r.json();if(t.success&&t.observaciones){const s={};let i=0;t.observaciones.forEach(c=>{c.estatus==="pendiente"&&(c.documento_informacion_id?s[c.documento_informacion_id]=(s[c.documento_informacion_id]||0)+1:i++)}),De(s),Ae(i)}}if(a.ok){const t=await a.json();if(t.props?.documentosRequeridos){const s=(t.props.documentosRequeridos||[]).map(i=>({...i,archivos:i.archivos||[]}));if(B(s),n){const i=s.find(c=>c.id===n.id);i&&_(i)}else s.length>0&&_(s[0]);y(!0),N(!1)}else N(!1),y(!0)}else console.error("Error al actualizar documentos legales:",a.status,a.statusText),N(!1),y(!0)}catch(a){console.error("Error en refrescarDocumentosLegales:",a),N(!1),y(!0)}},Ga=async()=>{if(g){N(!0),y(!1),fe(!0);try{const a=Date.now(),[r,t]=await Promise.all([fetch(`/documentos/medicos-con-sp?campus_id=${g.ID_Campus}`,{method:"GET",headers:{Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}}),fetch(`/observaciones/campus/${g.ID_Campus}/todas`,{headers:{Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}})]);if(t.ok){const h=await t.json();if(h.success&&h.observaciones){const d={};let C=0;h.observaciones.forEach(l=>{l.estatus==="pendiente"&&(l.documento_informacion_id?d[l.documento_informacion_id]=(d[l.documento_informacion_id]||0)+1:C++)}),De(d),Ae(C)}}if(!r.ok)throw new Error(`Error en la respuesta: ${r.status}`);const s=await r.json(),i=Date.now()-a;if(!s.success||!s.carreras_medicas){ee([]);return}const c=s.carreras_medicas,o=s.documentos_agrupados||[],p=s.documentos_detalle||{};ge(c);const b=D.filter(h=>h.concepto.toLowerCase().includes("cartas de intenci√≥n de campo cl√≠nico"));if(b.length===0){ee([]);return}if(!c||c.length===0){ee([]);return}const j=[];if(o&&o.length>0?o.forEach((h,d)=>{const C=h.carrera_nombre;let l=null;const S=p[C]||[];if(S.length>0&&S[0].carrera_id?l=S[0].carrera_id:l=c.find(os=>os.Descripcion===C)?.ID_Especialidad,!l){console.error(`‚ùå No se pudo obtener carrera_id para "${C}". Saltando...`);return}const q=b[0],Q=`${q.id}_carrera_${l}`,V=(p[C]||[]).filter(T=>T.archivo_id).map(T=>({id:T.archivo_id.toString(),nombre:T.nombre_documento||T.folio_documento||"Documento m√©dico",tama√±o:null,fechaSubida:T.subido_en||new Date().toISOString().split("T")[0],estado:"completado",progreso:100,fechaExpedicion:T.fecha_expedicion,vigenciaDocumento:T.vigencia_documento,diasRestantesVigencia:T.dias_restantes_vigencia,metadata:{folio_documento:T.folio_documento,fecha_expedicion:T.fecha_expedicion,vigencia_documento:T.vigencia_documento,estado_bd:T.estado_final}}));let H="pendiente";V.length>0?h.Vigentes>0?H="vigente":h.Caducados>0?H="caducado":h.Rechazados>0&&(H="rechazado"):H="pendiente";const Me={...q,id:q.id,documentoOriginalId:q.id,uniqueKey:Q,concepto:`${q.concepto} - ${C}`,descripcion:`${q.descripcion} para la carrera de ${C}`,carreraId:String(l),carreraNombre:C,estado:H,archivos:V};j.push(Me)}):c.forEach(h=>{const d=h.ID_Especialidad,C=h.Descripcion;b.forEach(l=>{const S=`${l.id}_carrera_${d}`,q={...l,id:l.id,documentoOriginalId:l.id,uniqueKey:S,concepto:`${l.concepto} - ${C}`,descripcion:`${l.descripcion} para la carrera de ${C}`,carreraId:String(d),carreraNombre:C,estado:"pendiente",archivos:[]};j.push(q)})}),ee(j),n&&O==="medicos"){const h=j.find(d=>d.uniqueKey===n.uniqueKey||d.carreraNombre===n.carreraNombre&&d.documentoOriginalId===n.documentoOriginalId);h?_(h):j.length>0&&_(j[0])}else!n&&j.length>0&&_(j[0])}catch{ee([])}finally{y(!0),N(!1),fe(!1)}}},ra=()=>{setTimeout(()=>{Te()},2e3)};m.useEffect(()=>{console.log("üîÑ useEffect de carga inicial ejecut√°ndose con:",{campusInicial:v?.ID_Campus,documentosIniciales:x?.length}),N(!0),y(!1);const a=x?.every(t=>!t.archivos||t.archivos.length===0)||!1,r=!x||x.length===0;if(v&&(r||a))(async()=>{try{const s=await fetch("/documentos/cambiar-campus",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({campus_id:v.ID_Campus})});if(s.ok){const i=await s.json();if(i.documentos){const c=(i.documentos||[]).map(o=>({...o,archivos:o.archivos||[]}));B(c),c.length>0&&_(c[0]),y(!0),N(!1)}else N(!1),y(!0)}else N(!1),y(!0)}catch{N(!1),y(!0)}})();else if(v&&x&&x.length>0&&!a){if(!n&&D.length>0)_(D[0]);else if(!n&&x.length>0){const t={...x[0],archivos:x[0].archivos||[]};_(t)}y(!0),N(!1)}else if(x&&x.length>0){const t=x.map(s=>({...s,archivos:s.archivos||[]}));B(t),!n&&t.length>0&&_(t[0]),y(!0),N(!1)}else N(!1),y(!0)},[v?.ID_Campus,x]),m.useEffect(()=>{D.length>0&&D.forEach((a,r)=>{(a.archivos?.length||0)>0&&a.archivos?.forEach((s,i)=>{})}),D.length>0&&!n&&_(D[0])},[D,n]),m.useEffect(()=>{D.flatMap(r=>(r.archivos||[]).filter(t=>t.estado==="completado"&&!t.fechaExpedicion&&!t.vigenciaDocumento)).forEach(r=>{})},[D]),m.useEffect(()=>{if(n){const a=D.find(r=>f(r)===f(n));a&&a.archivos?.some((t,s)=>{const i=n.archivos?.[s];return i&&(t.fechaExpedicion!==i.fechaExpedicion||t.vigenciaDocumento!==i.vigenciaDocumento||t.diasRestantesVigencia!==i.diasRestantesVigencia)})&&_(a)}},[D]),m.useEffect(()=>{g&&g.ID_Campus&&D.length===0&&Te()},[g]);const Ua=(a,r)=>{a.validacionIA&&!a.validacionIA.coincide&&(sa({fileName:a.nombre,documentType:r,reason:a.validacionIA.razon||"Documento no v√°lido",percentage:a.validacionIA.porcentaje||0,expectedType:r,detectedType:"Informaci√≥n de an√°lisis IA"}),de(!0))},Ka=a=>{const r=P(a);if(r.length===0)return"No hay archivos subidos para este documento";const t=A(a),s=w(t);return s==="rechazado"?"El documento fue rechazado por un administrador. Puede subir un nuevo archivo.":s==="caducado"||k(a)?"El documento ha caducado por vencimiento de fecha. Puede subir un nuevo archivo.":s==="vigente"&&!k(a)?"Documento aprobado por administrador. No se pueden subir m√°s archivos.":r.find(o=>o.estado==="completado"&&(!o.validacionIA||o.validacionIA.coincide))?"Documento validado autom√°ticamente por IA. Esperando revisi√≥n del administrador.":r.find(o=>o.estado==="rechazado"||o.validacionIA&&!o.validacionIA.coincide)?"El documento anterior fue rechazado por validaci√≥n autom√°tica. Puede subir un nuevo archivo.":"Puede subir archivos para este documento"},Re=async a=>{N(!0),y(!1);try{const r=await Oe("/documentos/cambiar-campus",{method:"POST",body:JSON.stringify({campus_id:a})});if(r.ok){const t=await r.json();He(t.campus);const s=t.documentos.map(i=>({...i,archivos:i.archivos||[]}));B(s),_(s[0]||null),ne({}),da("legales"),await oa(a),y(!0),N(!1)}else N(!1),y(!0)}catch{N(!1),y(!0)}},oa=async a=>{if(a){ia(!0);try{const r=await Oe(`/documentos/campus/${a}/medico`);if(r.ok){const t=await r.json();Fe(t.tiene_carreras_medicas),ge(t.carreras_medicas||[]),(t.carreras_medicas||[]).forEach(s=>{})}else Fe(!1),ge([])}catch{Fe(!1),ge([])}finally{ia(!1)}}},Xa=(a,r)=>{a.preventDefault(),ye(r)},Ha=a=>{a.preventDefault(),ye(null)},Ja=(a,r)=>{a.preventDefault(),ye(null);const t=Array.from(a.dataTransfer.files);na(t,r)},na=(a,r)=>{const t=a.filter(s=>{const i=s.type==="application/pdf"||s.name.toLowerCase().endsWith(".pdf");return i||alert(`El archivo "${s.name}" no es un PDF v√°lido. Solo se permiten archivos PDF.`),i});t.length!==0&&ne(s=>({...s,[r]:[...s[r]||[],...t]}))},Qa=(a,r)=>{if(a.target.files){const t=Array.from(a.target.files);na(t,r)}},Wa=(a,r)=>{ne(t=>({...t,[a]:t[a]?.filter((s,i)=>i!==r)||[]}))},Ya=async a=>{X.forEach((s,i)=>{console.log(`  Doc ${i}: key="${f(s)}", uniqueKey="${s.uniqueKey}", id="${s.id}"`)});const r=oe[a],t=X.find(s=>f(s)===a);if(!t){alert("Error: Documento no encontrado");return}if(!r||r.length===0){console.log("No hay archivos para subir"),alert("No hay archivos seleccionados. Por favor selecciona un archivo primero.");return}if(!g?.ID_Campus){console.error("No hay campus seleccionado"),alert("No hay campus seleccionado");return}ce(!0),R(0),E("Preparando archivos..."),xe(!1),he(0),Ie(r.length),ne(s=>({...s,[a]:[]}));for(let s=0;s<r.length;s++){const i=r[s];ue(i.name),E(`Subiendo ${i.name}...`),R(10);try{const c=new FormData;c.append("archivo",i);const o=t.documentoOriginalId||t.id;if(c.append("documento_id",o.toString()),c.append("campus_id",g.ID_Campus),t.carreraId){const d=String(t.carreraId);c.append("carrera_id",d)}for(let d of c.entries());await new Promise(d=>setTimeout(d,500)),R(25),E(`Validando ${i.name}...`),await new Promise(d=>setTimeout(d,500)),R(50),E(`Guardando ${i.name} en servidor...`),await new Promise(d=>setTimeout(d,500)),R(75),E(`Finalizando subida de ${i.name}...`);const p=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),b=new FormData;b.append("archivo",i),b.append("documento_id",o.toString()),b.append("campus_id",g.ID_Campus),t.carreraId&&b.append("carrera_id",t.carreraId);for(let d of b.entries())d[1]instanceof File;const j=await fetch("/documentos/subir-archivo",{method:"POST",headers:{"X-CSRF-TOKEN":p||""},body:b}),h=await j.text();if(j.ok)try{const d=JSON.parse(h);if(!d.archivo||!d.archivo.estado){E("Error: El archivo no se proces√≥ correctamente en el servidor"),ce(!1);return}R(100),E(`${i.name} subido exitosamente`),he(l=>l+1),d.archivo.estado==="analizando"&&(E(`Analizando ${i.name} con IA...`),R(100),await new Promise(l=>setTimeout(l,2e3)));const C={id:d.archivo.id,nombre:i.name,tama√±o:d.archivo.tama√±o||i.size||0,fechaSubida:new Date().toISOString().split("T")[0],estado:d.archivo.estado==="analizando"?"analizando":"completado",progreso:100,mensaje:d.archivo.estado==="analizando"?"Analizando con IA...":"Completado"};B(l=>l.map(S=>f(S)===a?{...S,estado:"subido",archivos:[...P(S),C]}:S)),n&&f(n)===a&&_(l=>l&&{...l,estado:"subido",archivos:[...P(l),C]}),Ze(l=>new Set(l).add(d.archivo.id)),setTimeout(()=>{Ze(l=>{const S=new Set(l);return S.delete(d.archivo.id),S})},5e3),d.archivo.estado==="analizando"&&as(d.archivo.id,a,1),ra()}catch{E("Error: El servidor devolvi√≥ una respuesta inv√°lida"),ce(!1);return}else{try{const d=JSON.parse(h);d.validation_errors&&Object.keys(d.validation_errors).forEach(C=>{}),d.debug_info,E(`Error al subir ${i.name}: ${d.error||"Error desconocido"}`)}catch{E(`Error al subir ${i.name}: Error del servidor (${j.status})`)}R(0),await new Promise(d=>setTimeout(d,2e3))}}catch{E(`Error de conexi√≥n con ${i.name}`),R(0),N(!1),y(!0),fe(!1),await new Promise(o=>setTimeout(o,2e3))}}xe(!0),R(100),E(`Todos los archivos procesados exitosamente (${Ee+1}/${r.length})`),ue(""),await new Promise(s=>setTimeout(s,3e3)),ce(!1),xe(!1),R(0),E(""),ue(""),he(0),Ie(0)},[Pe,Z]=m.useState(new Set),[Za,Fe]=m.useState(!1),[es,ia]=m.useState(!1),[ca,ge]=m.useState([]),[J,ee]=m.useState([]),[bs,fe]=m.useState(!1),[O,da]=m.useState("legales");m.useEffect(()=>()=>{Z(new Set)},[]),m.useEffect(()=>{g?.ID_Campus&&oa(g.ID_Campus)},[g]),m.useEffect(()=>{if(g)if(O!=="medicos"&&(N(!0),y(!1)),ee([]),O==="medicos")setTimeout(()=>{Te()},50),y(!0),N(!1);else{const a=D.filter(r=>!r.concepto.toLowerCase().includes("cartas de intenci√≥n de campo cl√≠nico"));a.length>0&&_(a[0]),y(!0),N(!1)}},[O,g]),m.useEffect(()=>{if(O==="medicos"&&J.length>0)if(!n||!n.uniqueKey)_(J[0]);else{const a=J.find(r=>r.uniqueKey===n.uniqueKey);a&&a!==n&&_(a)}},[J,O]);const as=async(a,r,t=2)=>{if(Pe.has(a))return;Z(c=>new Set(c).add(a));let s=0;const i=async()=>{s++;try{const c=await Oe(`/documentos/analisis/estado?archivo_id=${a}`,{method:"GET"});if(c.ok){const o=await c.json();if(B(p=>p.map(b=>{if(f(b)===r){const j=P(b).map(l=>{if(l.id===a){const S=o.tiene_analisis;let q=S?"completado":"analizando",Q="";if(o.estado==="rechazado"||S&&o.analisis&&o.analisis.validacion&&!o.analisis.validacion.coincide){q="rechazado";let V="";o.analisis&&o.analisis.validacion?V=o.analisis.validacion.razon:o.analisis&&o.analisis.documento?V=o.analisis.documento.observaciones:V="Documento no cumple con los requisitos",Q=`Documento rechazado: ${V}`;const H=D.find(Me=>f(Me)===r);sa({fileName:l.nombre,documentType:H?.concepto||"Documento",reason:V,percentage:0,expectedType:o.analisis?.validacion?.documento_esperado||H?.concepto||"Tipo de documento requerido",detectedType:o.analisis?.validacion?.documento_detectado||o.analisis?.documento?.nombre_detectado||o.documento?.tipo_detectado||"Tipo no identificado",cityValidation:o.analisis?.validacion?.ciudad_campus?{campusCity:o.analisis.validacion.ciudad_campus,documentCities:o.analisis.validacion.ciudades_documento||[],isValid:o.analisis.validacion.coincide||!1,details:o.analisis.validacion.evaluacion_gpt==="ciudad_incorrecta"?"El documento pertenece a una ciudad diferente a la del campus seleccionado":void 0}:void 0}),de(!0)}else if(S&&o.analisis&&o.analisis.validacion){let V=`Documento validado correctamente (${o.analisis.validacion.porcentaje_coincidencia}% coincidencia)`;o.analisis.validacion.ciudad_campus&&o.analisis.validacion.ciudades_documento&&(V+=` ‚Ä¢ Ubicaci√≥n: ${o.analisis.validacion.ciudad_campus} ‚úì`),Q=V}else S?Q="An√°lisis IA completado":Q=`Analizando documento... (${s}/${t})`;return{...l,estado:q,mensaje:Q,validacionIA:o.analisis?.validacion?{coincide:o.analisis.validacion.coincide,porcentaje:o.analisis.validacion.porcentaje_coincidencia,razon:o.analisis.validacion.razon,accion:o.analisis.validacion.accion}:void 0,fechaExpedicion:o.analisis?.documento?.fecha_expedicion,vigenciaDocumento:o.analisis?.documento?.vigencia_documento,diasRestantesVigencia:o.analisis?.documento?.dias_restantes_vigencia,metadata:o.metadata?{folio_documento:o.metadata.folio_documento,fecha_expedicion:o.metadata.fecha_expedicion,vigencia_documento:o.metadata.vigencia_documento,lugar_expedicion:o.metadata.lugar_expedicion,estado_bd:o.metadata.estado_bd||o.estado_bd}:void 0}}return l});let h=b.estado;const d=j.find(l=>l.estado==="completado"&&(!l.validacionIA||l.validacionIA.coincide));return j.find(l=>l.estado==="rechazado"||l.estado==="completado"&&l.validacionIA&&!l.validacionIA.coincide)?h="rechazado":d?h="vigente":j.some(l=>l.estado==="completado")&&(h="subido"),{...b,estado:h,archivos:j}}return b})),n&&f(n)===r&&_(p=>{if(p&&D.find(j=>f(j)===r)){const j=o.estado==="rechazado"||o.analisis?.validacion&&!o.analisis.validacion.coincide;return{...p,estado:j?"rechazado":o.analisis?.validacion?.coincide?"vigente":p.estado,archivos:p.archivos?.map(d=>{if(d.id===a){const C=j?"rechazado":o.tiene_analisis?"completado":"analizando";return{...d,estado:C,validacionIA:o.analisis?.validacion?{coincide:o.analisis.validacion.coincide,porcentaje:o.analisis.validacion.porcentaje_coincidencia,razon:o.analisis.validacion.razon,accion:o.analisis.validacion.accion}:void 0,fechaExpedicion:o.analisis?.documento?.fecha_expedicion,vigenciaDocumento:o.analisis?.documento?.vigencia_documento,diasRestantesVigencia:o.analisis?.documento?.dias_restantes_vigencia}}return d})||[]}}return p}),o.tiene_analisis||s>=t){if(Z(p=>{const b=new Set(p);return b.delete(a),b}),o.tiene_analisis){const p=D.find(h=>f(h)===r),b=p?.archivos?.find(h=>h.id===a);if(o.estado==="rechazado"||o.analisis&&o.analisis.validacion&&!o.analisis.validacion.coincide)setTimeout(()=>{B(h=>[...h])},100);else if(o.analisis?.validacion?.coincide){const h=p?.archivos?.find(d=>d.id===a);Ra(`${h?.nombre||"Documento"} validado exitosamente`),$e(!0),setTimeout(()=>$e(!1),4e3),setTimeout(()=>{_(d=>d&&{...d})},500)}ra()}!o.tiene_analisis&&s>=t&&B(p=>p.map(b=>{if(f(b)===r){const j=P(b).map(h=>h.id===a?{...h,estado:"error"}:h);return{...b,archivos:j}}return b}));return}setTimeout(i,2e3)}else s<t?setTimeout(i,2e3):Z(o=>{const p=new Set(o);return p.delete(a),p})}catch{s<t?setTimeout(i,3e3):Z(o=>{const p=new Set(o);return p.delete(a),p})}};i()},ss=()=>{Z(new Set),B(a=>a.map(r=>({...r,archivos:P(r).map(t=>t.estado==="analizando"?{...t,estado:"error"}:t)})))},la=a=>{const r=new Date,s=new Date(a).getTime()-r.getTime();return Math.ceil(s/(1e3*60*60*24))},ts=a=>a<0?"text-red-600":a<=7?"text-orange-600":a<=30?"text-yellow-600":"text-green-600",w=a=>a.toLowerCase(),k=a=>{const r=A(a),t=w(r);if(t==="caducado")return!0;const s=Ue(a),i=s.diasRestantes!==null?s.diasRestantes:la(a.fechaLimite),c=t==="vigente"&&i<0;return c&&console.log("‚è∞ Documento caducado din√°micamente:",a.concepto,"D√≠as restantes:",i),c},ma=a=>{const r=A(a);if(k(a))return"bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-400 border-orange-300 dark:border-orange-800";const t=w(r);return gs(t)},ua=a=>{if(k(a))return e.jsx(Y,{className:"w-3 h-3"});const r=A(a),t=w(r);return fs(t)},xa=a=>{if(k(a))return"caducado";const r=A(a);return w(r)},A=a=>{const t=P(a).filter(s=>s.metadata?.estado_bd);return t.length>0&&t.sort((i,c)=>new Date(c.fechaSubida).getTime()-new Date(i.fechaSubida).getTime())[0].metadata?.estado_bd||a.estado},ha=D.filter(a=>{const r=a.concepto.toLowerCase().includes(ie.toLowerCase())||a.descripcion.toLowerCase().includes(ie.toLowerCase());let t=!1;const s=w(a.estado);return M==="todos"?t=!0:M==="subido"?t=s==="subido"||s==="vigente"||s==="caducado"||k(a):t=s===M||M==="caducado"&&k(a),r&&t}),X=(()=>{if(O==="legales")return ha.filter(a=>!a.concepto.toLowerCase().includes("cartas de intenci√≥n de campo cl√≠nico"));{if(J.length>0)return console.log("üîÑ Usando documentos m√©dicos con estado actualizado:",J.length),J.filter(t=>{const s=t.concepto.toLowerCase().includes(ie.toLowerCase())||t.descripcion.toLowerCase().includes(ie.toLowerCase());let i=!1;const c=w(t.estado);return M==="todos"?i=!0:M==="subido"?i=c==="subido"||c==="vigente"||c==="caducado"||k(t):i=c===M||M==="caducado"&&k(t),s&&i});const a=ha.filter(t=>t.concepto.toLowerCase().includes("cartas de intenci√≥n de campo cl√≠nico"));if(a.length===0||ca.length===0)return[];const r=[];return ca.forEach(t=>{a.forEach(s=>{const i=`${s.id}_carrera_${t.ID_Especialidad}`,c={id:s.id,concepto:`${s.concepto} - ${t.Descripcion}`,descripcion:`${s.descripcion} para la carrera de ${t.Descripcion}`,fechaLimite:s.fechaLimite,estado:"pendiente",archivos:[],obligatorio:s.obligatorio,categoria:s.categoria,documentoOriginalId:s.id,uniqueKey:i,carreraId:String(t.ID_Especialidad),carreraNombre:t.Descripcion};r.push(c)})}),r}})();return e.jsxs(cs,{breadcrumbs:[{title:"Dashboard",href:"/dashboard"},{title:"Documentos",href:"/documentos"},{title:"Subir Documentos",href:"/documentos/upload"}],children:[e.jsx(is,{title:"Subida de Documentos",children:e.jsx("meta",{name:"csrf-token",content:document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""})}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 p-4",children:[$a&&e.jsx("div",{className:"fixed top-4 right-4 z-40 animate-in slide-in-from-right-full duration-500",children:e.jsx(I,{className:"bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800 shadow-lg",children:e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/50 rounded-full flex items-center justify-center",children:e.jsx(U,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Archivo subido exitosamente"}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:Ta})]}),e.jsx(z,{variant:"ghost",size:"sm",onClick:()=>$e(!1),className:"text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-200 hover:bg-green-100 dark:hover:bg-green-900/50 h-6 w-6 p-0",children:e.jsx(pe,{className:"w-3 h-3"})})]})})})}),za&&e.jsx("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center z-50",onClick:a=>a.preventDefault(),children:e.jsx(I,{className:"w-96 mx-4 dark:bg-gray-800 dark:border-gray-700",onClick:a=>a.stopPropagation(),children:e.jsx($,{className:"p-8",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"relative",children:K?e.jsxs("div",{className:"w-16 h-16 mx-auto",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(U,{className:"w-12 h-12 text-green-600 animate-pulse"})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-20 h-20 bg-green-600 rounded-full opacity-20 animate-ping"})})]}):e.jsxs("div",{className:"w-16 h-16 mx-auto",children:[e.jsx(se,{className:"w-16 h-16 text-blue-600 animate-spin"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full opacity-20 animate-ping"})})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:`text-lg font-semibold ${K?"text-green-900 dark:text-green-100":"text-gray-900 dark:text-gray-100"}`,children:K?"Documentos Subidos Exitosamente":"Procesando Documentos"}),Ye&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:Ye}),e.jsx("p",{className:`text-sm font-medium ${K?"text-green-600 dark:text-green-400":"text-blue-600 dark:text-blue-400"}`,children:Aa}),K&&Ee>0&&e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-3",children:[e.jsx(U,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),e.jsxs("span",{className:"text-sm font-semibold text-green-700 dark:text-green-300",children:[Ee," de ",Ea," archivo(s) procesado(s) exitosamente"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:"Progreso"}),e.jsxs("span",{children:[We,"%"]})]}),e.jsx(fa,{value:We,className:`h-3 ${K?"bg-green-100 dark:bg-green-900/30":"dark:bg-gray-700"}`})]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:K?"Los documentos se est√°n procesando en segundo plano...":"Por favor espera mientras procesamos tus documentos..."}),K&&e.jsxs(z,{onClick:()=>{ce(!1),xe(!1),R(0),E(""),ue(""),he(0),Ie(0)},className:"w-full bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Continuar"]})]})})})}),Ma&&G&&e.jsx("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center z-50 p-4",onClick:a=>a.preventDefault(),children:e.jsxs(I,{className:"w-full max-w-2xl bg-white dark:bg-gray-800 shadow-xl dark:border-gray-700",onClick:a=>a.stopPropagation(),children:[e.jsx(be,{className:"pb-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:e.jsx(L,{className:"w-4 h-4 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx(je,{className:"text-lg text-gray-900 dark:text-gray-100",children:"Documento Rechazado"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Validaci√≥n autom√°tica"})]})]}),e.jsx(z,{variant:"ghost",size:"sm",onClick:()=>de(!1),className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 h-8 w-8 p-0",children:e.jsx(pe,{className:"w-4 h-4"})})]})}),e.jsxs($,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Archivo:"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-900/50 p-3 rounded-lg",children:G.fileName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Motivo:"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 bg-red-50 dark:bg-red-900/20 p-3 rounded-lg border-l-4 border-red-400 dark:border-red-600",children:G.reason})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Esperado:"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-center",children:G.expectedType})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Detectado:"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 bg-orange-50 dark:bg-orange-900/20 p-2 rounded text-center",children:G.detectedType})]})]}),G.cityValidation&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Validaci√≥n de Ubicaci√≥n:"}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Campus:"}),e.jsxs("p",{className:"text-sm text-gray-700 bg-white p-2 rounded border",children:["üìç ",G.cityValidation.campusCity]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Documento de:"}),e.jsxs("p",{className:"text-sm text-gray-700 bg-white p-2 rounded border",children:["üèôÔ∏è ",G.cityValidation.documentCities.join(", ")||"No detectado"]})]})]}),G.cityValidation.details&&e.jsxs("div",{className:"flex items-start gap-2 text-sm text-yellow-800",children:[e.jsx(L,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("p",{children:G.cityValidation.details})]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-blue-800 mb-2",children:"¬øQu√© hacer?"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Suba el documento correcto o contacte al administrador si considera que es un error."})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(z,{variant:"outline",onClick:()=>de(!1),className:"flex-1",children:"Cerrar"}),e.jsxs(z,{onClick:()=>{de(!1),(n?document.getElementById(`file-input-${f(n)}`):null)?.scrollIntoView({behavior:"smooth"})},className:"flex-1",children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),"Subir Documento Correcto"]})]})]})]})}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight mb-2 dark:text-gray-100",children:"Subir Documentos"}),e.jsx("p",{className:"text-muted-foreground dark:text-gray-400",children:"Selecciona un campus y un documento de la lista para subir los archivos requeridos"})]}),Pe.size>0&&e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 animate-spin"}),e.jsxs("span",{className:"text-sm text-blue-700 dark:text-blue-300",children:[Pe.size," an√°lisis en curso"]})]}),e.jsxs(z,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-blue-700 dark:text-blue-300 hover:text-blue-900 dark:hover:text-blue-100 hover:bg-blue-100 dark:hover:bg-blue-900/50",onClick:ss,children:[e.jsx(pe,{className:"w-3 h-3 mr-1"}),"Detener"]})]})]})}),(!u||!Array.isArray(u)||u.length===0)&&e.jsx(I,{className:"mb-6 border-destructive",children:e.jsx($,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[e.jsx(L,{className:"w-5 h-5"}),e.jsx("p",{className:"font-medium",children:F||"No tienes campus asignados para subir documentos"})]})})}),g&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-5 mb-6",children:[e.jsx(I,{children:e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium",children:["Total ",O==="medicos"?"M√©dicos":"Legales"]}),e.jsx("p",{className:"text-2xl font-bold",children:X.length})]})]})})}),e.jsx(I,{children:e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ja,{className:"w-4 h-4 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Pendientes"}),e.jsx("p",{className:"text-2xl font-bold",children:X.filter(a=>w(a.estado)==="pendiente").length})]})]})})}),e.jsx(I,{children:e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Completados"}),e.jsx("p",{className:"text-2xl font-bold",children:X.filter(a=>w(a.estado)==="vigente"&&!k(a)).length})]})]})})}),e.jsx(I,{children:e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Caducados"}),e.jsx("p",{className:"text-2xl font-bold",children:X.filter(a=>w(a.estado)==="caducado"||k(a)).length})]})]})})}),e.jsx(I,{children:e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Rechazados"}),e.jsx("p",{className:"text-2xl font-bold",children:X.filter(a=>w(a.estado)==="rechazado").length})]})]})})})]}),g&&e.jsx(I,{className:"cursor-pointer hover:shadow-md transition-shadow border-2 hover:border-blue-300 dark:hover:border-blue-700",onClick:Va,children:e.jsx($,{className:"p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center relative ${ze>0,"bg-gray-100 dark:bg-gray-800"}`,children:[e.jsx(ga,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),ze>0&&e.jsx("span",{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full bg-red-500 text-white text-xs font-bold flex items-center justify-center ring-2 ring-white dark:ring-gray-800",children:ze})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Comentarios Generales del Campus"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"Click para ver y gestionar"})]})]})})})}),g&&e.jsxs(e.Fragment,{children:[aa&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(I,{className:"h-fit",children:[e.jsx(be,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(je,{className:"text-lg",children:"Documentos Requeridos"}),u&&Array.isArray(u)&&u.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{htmlFor:"campus-select",className:"text-sm font-medium text-muted-foreground",children:"Campus:"}),e.jsxs(Ve,{value:g?.ID_Campus||"",onValueChange:Re,children:[e.jsx(Le,{className:"w-52",children:e.jsx(Be,{placeholder:"Selecciona campus"})}),e.jsx(Ge,{children:[...u].sort((a,r)=>a.Campus.localeCompare(r.Campus,"es",{sensitivity:"base"})).map(a=>e.jsx(ve,{value:a.ID_Campus,children:a.Campus},a.ID_Campus))})]})]})]})}),e.jsx($,{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(se,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-lg font-medium text-gray-700",children:"Cargando Documentos"}),e.jsx("p",{className:"text-sm text-gray-500",children:O==="medicos"?"Obteniendo estados de documentos m√©dicos...":"Obteniendo documentos legales..."})]})]})})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(I,{className:"h-fit",children:e.jsx($,{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto",children:e.jsx(W,{className:"w-8 h-8 text-gray-400 dark:text-gray-500"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-lg font-medium text-gray-700 dark:text-gray-300",children:"Preparando Informaci√≥n"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Por favor espera mientras cargamos la informaci√≥n completa..."})]})]})})})})]}),!aa&&Fa&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(I,{className:"h-fit",children:[e.jsxs(be,{className:"pb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx(je,{className:"text-lg",children:"Documentos Requeridos"}),u&&Array.isArray(u)&&u.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{htmlFor:"campus-select",className:"text-sm font-medium text-muted-foreground",children:"Campus:"}),e.jsxs(Ve,{value:g?.ID_Campus||"",onValueChange:Re,children:[e.jsx(Le,{className:"w-52",children:e.jsx(Be,{placeholder:"Selecciona campus"})}),e.jsx(Ge,{children:[...u].sort((a,r)=>a.Campus.localeCompare(r.Campus,"es",{sensitivity:"base"})).map(a=>e.jsx(ve,{value:a.ID_Campus,children:a.Campus},a.ID_Campus))})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"text-sm font-medium text-muted-foreground",children:"Tipo:"}),e.jsxs(Ve,{value:O,onValueChange:a=>{da(a)},children:[e.jsx(Le,{className:"w-40",children:e.jsx(Be,{})}),e.jsxs(Ge,{children:[e.jsx(ve,{value:"legales",children:"Legales"}),Za&&e.jsx(ve,{value:"medicos",children:"M√©dicos"})]})]}),es&&e.jsx(se,{className:"w-4 h-4 animate-spin text-blue-500"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(ds,{placeholder:"Buscar documento...",value:ie,onChange:a=>ka(a.target.value),className:"pl-9"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(z,{variant:M==="todos"?"default":"outline",size:"sm",onClick:()=>ke("todos"),children:"Todos"}),e.jsx(z,{variant:M==="pendiente"?"default":"outline",size:"sm",onClick:()=>ke("pendiente"),children:"Pendientes"}),e.jsx(z,{variant:M==="subido"?"default":"outline",size:"sm",onClick:()=>ke("subido"),children:"Subidos"})]})]})]})]}),e.jsx($,{className:"p-0",children:e.jsx("div",{ref:me,className:"max-h-[600px] overflow-y-auto",children:X.map(a=>{const r=a.uniqueKey||a.id,t=n?.uniqueKey===r||n?.id===a.id&&!a.uniqueKey;return e.jsxs("div",{className:`p-4 border-b cursor-pointer transition-colors hover:bg-muted/50 ${t?"bg-primary/10 border-l-4 border-l-primary":""}`,onClick:s=>{s.preventDefault();const i=me.current?.scrollTop||0;_(a),requestAnimationFrame(()=>{me.current&&(me.current.scrollTop=i)})},children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-medium text-sm line-clamp-2",children:a.concepto}),a.obligatorio&&e.jsx(ae,{variant:"destructive",className:"text-xs ml-2",children:"Req."})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs(ae,{className:ma(a),variant:"outline",children:[ua(a),e.jsx("span",{className:"ml-1 capitalize text-xs",children:xa(a)})]}),(()=>{const s=P(a),i=s[0],c=i?.metadata?.documento_informacion_id||i?.sdi_id||i?.documento_informacion_id||(typeof i?.id=="number"?i.id:null),o=c?Da[c]:0;return s.length>0&&c?e.jsxs(z,{variant:"ghost",size:"sm",onClick:p=>{p.stopPropagation(),qa(c,a.concepto)},className:"h-auto py-1 px-2 hover:bg-gray-100 dark:hover:bg-gray-700 relative",children:[e.jsx(ga,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}),o>0&&e.jsx("span",{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full bg-red-500 text-white text-xs font-bold flex items-center justify-center ring-2 ring-white dark:ring-gray-800",children:o})]}):null})()]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(Y,{className:"w-3 h-3"}),(()=>{const s=Ue(a),c=(s.diasRestantes!==null?s.diasRestantes:la(a.fechaLimite))??0;return e.jsxs(e.Fragment,{children:[e.jsx("span",{children:Ne(s.fecha)}),e.jsxs("span",{className:`font-medium ${ts(c)}`,children:["(",c>=0?`${c}d`:`${Math.abs(c)}d vencido`,")"]})]})})()]})]},r)})})})]})}),e.jsx("div",{className:"lg:col-span-2",children:n?e.jsxs(I,{className:"h-fit dark:bg-gray-800 dark:border-gray-700",children:[e.jsxs(be,{children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(je,{className:"text-xl dark:text-gray-100",children:n.concepto}),e.jsx("p",{className:"text-muted-foreground dark:text-gray-400 mt-1",children:n.descripcion})]}),e.jsx(ae,{className:ma(n),children:e.jsxs("div",{className:"flex items-center gap-1",children:[ua(n),e.jsx("span",{className:"capitalize",children:xa(n)})]})})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm pt-2",children:[e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground dark:text-gray-400",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsxs("span",{children:["Vence: ",Ne(Ue(n).fecha)]})]}),n.obligatorio&&e.jsx(ae,{variant:"destructive",className:"text-xs",children:"Documento Obligatorio"}),k(n)&&e.jsx(ae,{className:"text-xs bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-400 border-orange-300 dark:border-orange-800",children:"CADUCADO"}),n?.carreraNombre&&e.jsx(ae,{variant:"secondary",className:"text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400",children:n.carreraNombre})]})]}),e.jsxs($,{className:"space-y-6",children:[P(n).length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-3 dark:text-gray-200",children:["Archivos subidos (",P(n).length,")"]}),e.jsx("div",{className:"space-y-2",children:P(n).map(a=>{const r=n?.estado==="rechazado"||a.validacionIA&&!a.validacionIA.coincide,t=k(n);let s="";return Ia.has(a.id)?s="border-green-400 dark:border-green-600 bg-green-50 dark:bg-green-900/20 shadow-lg ring-2 ring-green-200 dark:ring-green-800 ring-opacity-50 animate-pulse":a.estado==="subiendo"||a.estado==="procesando"||a.estado==="analizando"?s="border-blue-300 dark:border-blue-700 bg-blue-50 dark:bg-blue-900/20 shadow-lg":a.estado==="completado"?r?s="border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20":t?s="border-orange-200 dark:border-orange-800 bg-orange-50 dark:bg-orange-900/20":s="border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":a.estado==="rechazado"?s="border-red-300 dark:border-red-700 bg-red-50 dark:bg-red-900/20 shadow-lg":a.estado==="error"?s="border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20":s="border-gray-200 dark:border-gray-700 dark:bg-gray-800/50",e.jsx("div",{className:`p-3 border rounded-lg transition-all duration-300 ${s}`,children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"flex items-center gap-3 flex-1",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium dark:text-gray-200",children:a.nombre}),e.jsx("p",{className:"text-xs text-muted-foreground dark:text-gray-400",children:ba(a)}),"                                                                    ",a.estado==="subiendo"&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(te,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 animate-bounce"}),e.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:a.mensaje||"Subiendo archivo..."}),e.jsxs("span",{className:"text-xs text-blue-500 dark:text-blue-400 font-bold",children:[a.progreso,"%"]})]}),e.jsx(fa,{value:a.progreso,className:"h-3 bg-blue-100 dark:bg-blue-900/30"})]}),a.estado==="procesando"&&e.jsx("div",{className:"mt-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400 animate-spin"}),e.jsx("span",{className:"text-sm font-medium text-yellow-700 dark:text-yellow-300",children:a.mensaje||"Procesando documento..."})]})}),a.estado==="analizando"&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Na,{className:"w-4 h-4 text-purple-600 dark:text-purple-400 animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:a.mensaje||"Analizando con IA..."})]}),e.jsx("div",{className:"mt-1 text-xs text-purple-600 dark:text-purple-400",children:e.jsx("div",{className:"mt-1 text-xs text-purple-600 dark:text-purple-400",children:"procesando el documento..."})})]}),a.estado==="completado"&&e.jsxs(e.Fragment,{children:[(()=>{const i=n?.estado==="rechazado"||a.validacionIA&&!a.validacionIA.coincide,c=k(n);return i?e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(L,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),e.jsx("span",{className:"text-sm font-medium text-red-700 dark:text-red-300",children:"Documento Rechazado"}),a.validacionIA&&e.jsxs("span",{className:"text-xs bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400 px-2 py-1 rounded",children:["No aprobado (",a.validacionIA.porcentaje,"%)"]})]}):c?e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(Y,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),e.jsx("span",{className:"text-sm font-medium text-orange-700 dark:text-orange-300",children:"Documento Caducado"}),e.jsx("span",{className:"text-xs bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-400 px-2 py-1 rounded",children:"Vencido - Requiere Renovaci√≥n"})]}):e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(U,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Documento Vigente"}),a.validacionIA&&e.jsxs("span",{className:"text-xs bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400 px-2 py-1 rounded",children:["Aprobado (",a.validacionIA.porcentaje,"%)"]})]})})(),e.jsxs("div",{className:"mt-4 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:e.jsx(W,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Vista Previa del Documento"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:a.nombre})]})]}),e.jsxs(z,{variant:"outline",size:"sm",onClick:()=>window.open(`/documentos/file/${a.file_hash_sha256}`,"_blank"),className:"gap-2 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 shadow-sm",children:[e.jsx(pa,{className:"w-4 h-4"}),"Abrir Completo"]})]})}),e.jsxs("div",{className:"relative bg-gray-50 dark:bg-gray-900",children:[e.jsx("iframe",{src:`/documentos/archivo/${a.id}#toolbar=1&navpanes=0&scrollbar=1&view=FitH&zoom=125`,className:"w-full h-[700px] bg-white dark:bg-gray-900",title:`Preview de ${a.nombre}`,style:{backgroundColor:"#ffffff",border:"none",borderRadius:"0"},onError:()=>{console.log("Error cargando preview del PDF")},loading:"lazy",allowFullScreen:!0}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 hover:opacity-100 transition-all duration-300 pointer-events-none",children:e.jsxs("div",{className:"text-center text-white bg-gray-900 dark:bg-gray-800 bg-opacity-80 p-6 rounded-lg backdrop-blur-sm",children:[e.jsx(W,{className:"w-16 h-16 mx-auto mb-4 text-blue-400"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"Documento PDF Validado"}),e.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"Haz clic para abrir en una nueva ventana"}),e.jsxs(z,{variant:"secondary",onClick:()=>window.open(`/documentos/file/${a.file_hash_sha256}`,"_blank"),className:"gap-2 pointer-events-auto bg-white text-gray-900 hover:bg-gray-100",children:[e.jsx(pa,{className:"w-4 h-4"}),"Ver en Nueva Ventana"]})]})})]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 px-4 py-3 border-t border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400",children:e.jsx("div",{className:"flex items-center gap-4 text-xs",children:e.jsx("span",{children:ba(a)})})})})]})]}),a.estado==="rechazado"&&e.jsxs("div",{className:"flex flex-col gap-2 mt-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-red-700",children:"Documento Rechazado"})]}),a.validacionIA&&e.jsx(z,{variant:"ghost",size:"sm",onClick:()=>Ua(a,n.concepto),className:"text-red-600 hover:text-red-800 hover:bg-red-100 h-6 px-2",children:e.jsx("span",{className:"text-xs",children:"Ver detalles"})})]}),a.validacionIA&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm text-red-800 font-medium mb-1",children:"Motivo del rechazo:"}),e.jsx("p",{className:"text-xs text-red-700",children:a.validacionIA.razon}),a.validacionIA.porcentaje!==void 0&&e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Coincidencia: ",a.validacionIA.porcentaje,"%"]})]})]}),a.estado==="error"&&e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(L,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-red-700",children:a.mensaje||"Error en proceso"})]})]})})})},a.id)})})]}),(oe[f(n)]||[]).length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-3 dark:text-gray-200",children:["Archivos seleccionados (",(oe[f(n)]||[]).length,")"]}),e.jsx("div",{className:"space-y-2",children:(oe[f(n)]||[]).map((a,r)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-primary/5 dark:bg-primary/10 rounded-lg border border-primary/20 dark:border-primary/30",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(W,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium dark:text-gray-200",children:a.name}),e.jsx("p",{className:"text-xs text-muted-foreground dark:text-gray-400",children:Ke(a.size)})]})]}),e.jsx(z,{variant:"ghost",size:"sm",onClick:()=>Wa(f(n),r),className:"text-destructive hover:text-destructive dark:text-red-400 dark:hover:text-red-300",children:e.jsx(pe,{className:"w-4 h-4"})})]},r))}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs(z,{onClick:()=>Ya(f(n)),children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),"Subir Archivos (",(oe[f(n)]||[]).length,")"]}),e.jsx(z,{variant:"outline",onClick:()=>ne(a=>({...a,[f(n)]:[]})),children:"Cancelar"})]})]}),(w(A(n))!=="vigente"||k(n))&&Oa(n)?e.jsxs("div",{className:`
                                                border-2 border-dashed rounded-lg p-8 text-center transition-colors
                                                ${Qe===f(n)?"border-primary bg-primary/5 dark:bg-primary/10":"border-muted-foreground/25 hover:border-muted-foreground/50 dark:border-gray-700 dark:hover:border-gray-600"}
                                            `,onDragOver:a=>Xa(a,f(n)),onDragLeave:Ha,onDrop:a=>Ja(a,f(n)),children:[e.jsx(te,{className:`
                                                w-12 h-12 mx-auto mb-4
                                                ${Qe===f(n)?"text-primary":"text-muted-foreground dark:text-gray-400"}
                                            `}),e.jsx("h3",{className:"font-semibold mb-2 dark:text-gray-200",children:"Arrastra archivos aqu√≠"}),e.jsx("p",{className:"text-muted-foreground dark:text-gray-400 mb-4 text-sm",children:"o haz clic para seleccionar archivos"}),e.jsx("input",{type:"file",id:`file-input-${f(n)}`,className:"hidden",multiple:!0,accept:".pdf",onChange:a=>Qa(a,f(n))}),e.jsxs(z,{variant:"outline",onClick:()=>{document.getElementById(`file-input-${f(n)}`)?.click()},children:[e.jsx(us,{className:"w-4 h-4 mr-2"}),"Seleccionar Archivos"]}),e.jsx("p",{className:"text-xs text-muted-foreground dark:text-gray-400 mt-3",children:"Formatos: PDF"})]}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg p-8 text-center bg-gray-50 dark:bg-gray-800/50",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:w(A(n))==="vigente"&&!k(n)?e.jsx(U,{className:"w-12 h-12 text-green-600 dark:text-green-400"}):w(A(n))==="rechazado"?e.jsx(L,{className:"w-12 h-12 text-red-600 dark:text-red-400"}):w(A(n))==="caducado"||k(n)?e.jsx(Y,{className:"w-12 h-12 text-orange-600 dark:text-orange-400"}):e.jsx(L,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"font-semibold mb-2 text-gray-700 dark:text-gray-200",children:w(A(n))==="vigente"&&!k(n)?"Documento Aprobado":w(A(n))==="rechazado"?"Documento Rechazado - Puede Subir Nuevo":w(A(n))==="caducado"||k(n)?"Documento Caducado - Puede Subir Nuevo":"Subida Bloqueada"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:Ka(n)}),w(A(n))==="vigente"&&!k(n)&&e.jsxs("div",{className:"bg-green-100 dark:bg-green-900/30 border border-green-200 dark:border-green-800 rounded-lg p-3 text-green-800 dark:text-green-400",children:[e.jsx("p",{className:"text-sm font-medium",children:"Este documento ha sido validado y aprobado."}),e.jsx("p",{className:"text-xs mt-1 text-green-700 dark:text-green-400",children:"No se pueden realizar m√°s cambios a menos que sea rechazado por un administrador."})]}),w(A(n))==="rechazado"&&e.jsxs("div",{className:"bg-red-100 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg p-3 text-red-800 dark:text-red-400",children:[e.jsx("p",{className:"text-sm font-medium",children:"Este documento fue rechazado por un administrador."}),e.jsx("p",{className:"text-xs mt-1 text-red-700 dark:text-red-400",children:"Por favor, revise los comentarios y suba una nueva versi√≥n."})]}),(w(A(n))==="caducado"||k(n))&&e.jsxs("div",{className:"bg-orange-100 dark:bg-orange-900/30 border border-orange-200 dark:border-orange-800 rounded-lg p-3 text-orange-800 dark:text-orange-400",children:[e.jsx("p",{className:"text-sm font-medium",children:"Este documento ha caducado por vencimiento de fecha."}),e.jsx("p",{className:"text-xs mt-1 text-orange-700 dark:text-orange-400",children:"Puede subir una nueva versi√≥n actualizada del documento."})]})]})]})]}):e.jsx(I,{className:"h-full dark:bg-gray-800 dark:border-gray-700",children:e.jsx($,{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(W,{className:"w-12 h-12 text-muted-foreground dark:text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"font-semibold mb-2 dark:text-gray-200",children:"Selecciona un documento"}),e.jsx("p",{className:"text-muted-foreground dark:text-gray-400 text-sm",children:"Elige un documento de la lista para comenzar a subir archivos"})]})})})})]})]})]}),e.jsx(ls,{isOpen:wa,onClose:La,documentoInformacionId:Ca,campusId:g?.ID_Campus||"",documentoNombre:_a,isGlobalComment:Sa,readOnly:!0,canMarkAttended:ya})]})};export{Vs as default};
