import{a as r,j as e,H as Ps,c as lt}from"./app-DN-UaI3C.js";import{c as Bt,u as zs,R as Ms,a as wt,b as Os,d as $s,P as ks,V as Fs,e as Ls,h as Vs,f as Bs,g as Us,F as Hs,D as qs,C as Ks,i as Gs,A as Ws,X as Xe,U as Fe}from"./app-layout-t_kAf0E0.js";import{C as oe,c as ae,a as Je,b as Ze}from"./card-Duk9upUV.js";import{u as ge,a as Ys,c as Le,B as Z}from"./button-hq0xZ_1e.js";import{B as Oe}from"./badge-BLlpwY0z.js";import{P as $t}from"./progress-Bs7ttNTN.js";import{I as Xs}from"./input-BqPFud_f.js";import{L as dt}from"./label-DTsZihqJ.js";import{P as ce,r as Ut}from"./index-CSqJ13ZB.js";import{u as kt,c as Js,a as X,d as Ce}from"./index-DThZ4RVZ.js";import{u as Zs}from"./index-CQrK86rO.js";import{c as st}from"./createLucideIcon-CVm8T6qh.js";import{C as Qs}from"./check-Bid-dLEL.js";import{C as je,F as _e}from"./file-text-DsH5JBeQ.js";import{L as $e}from"./loader-circle-Q0DZLHE1.js";import{C as ue}from"./circle-alert-CCmSb8s2.js";import{C as Ht}from"./clock-B5DasqnV.js";import{C as ke}from"./calendar-BTzYcHMb.js";import{B as qt}from"./brain-CT1Ost0A.js";import{E as Ft}from"./eye-4jbxiKKR.js";/* empty css            */import"./index-u1-Hf6Gb.js";import"./index-DW9AIAM8.js";import"./log-out-B9lZ-pFN.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Kt=st("ChevronDown",eo);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],so=st("ChevronUp",to);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ao=st("Plus",oo);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],ro=st("Search",no);function Lt(s,[n,o]){return Math.min(o,Math.max(n,s))}var co=[" ","Enter","ArrowUp","ArrowDown"],io=[" ","Enter"],Re="Select",[ot,at,lo]=Os(Re),[Ve]=Js(Re,[lo,Bt]),nt=Bt(),[uo,Se]=Ve(Re),[mo,po]=Ve(Re),Gt=s=>{const{__scopeSelect:n,children:o,open:p,defaultOpen:i,onOpenChange:j,value:x,defaultValue:u,onValueChange:h,dir:y,name:T,autoComplete:_,disabled:V,required:l,form:D}=s,v=nt(n),[S,M]=r.useState(null),[w,R]=r.useState(null),[pe,W]=r.useState(!1),be=zs(y),[$,ie]=kt({prop:p,defaultProp:i??!1,onChange:j,caller:Re}),[L,he]=kt({prop:x,defaultProp:u,onChange:h,caller:Re}),ee=r.useRef(null),q=S?D||!!S.closest("form"):!0,[ne,re]=r.useState(new Set),te=Array.from(ne).map(J=>J.props.value).join(";");return e.jsx(Ms,{...v,children:e.jsxs(uo,{required:l,scope:n,trigger:S,onTriggerChange:M,valueNode:w,onValueNodeChange:R,valueNodeHasChildren:pe,onValueNodeHasChildrenChange:W,contentId:wt(),value:L,onValueChange:he,open:$,onOpenChange:ie,dir:be,triggerPointerDownPosRef:ee,disabled:V,children:[e.jsx(ot.Provider,{scope:n,children:e.jsx(mo,{scope:s.__scopeSelect,onNativeOptionAdd:r.useCallback(J=>{re(se=>new Set(se).add(J))},[]),onNativeOptionRemove:r.useCallback(J=>{re(se=>{const le=new Set(se);return le.delete(J),le})},[]),children:o})}),q?e.jsxs(xs,{"aria-hidden":!0,required:l,tabIndex:-1,name:T,autoComplete:_,value:L,onChange:J=>he(J.target.value),disabled:V,form:D,children:[L===void 0?e.jsx("option",{value:""}):null,Array.from(ne)]},te):null]})})};Gt.displayName=Re;var Wt="SelectTrigger",Yt=r.forwardRef((s,n)=>{const{__scopeSelect:o,disabled:p=!1,...i}=s,j=nt(o),x=Se(Wt,o),u=x.disabled||p,h=ge(n,x.onTriggerChange),y=at(o),T=r.useRef("touch"),[_,V,l]=gs(v=>{const S=y().filter(R=>!R.disabled),M=S.find(R=>R.value===x.value),w=vs(S,v,M);w!==void 0&&x.onValueChange(w.value)}),D=v=>{u||(x.onOpenChange(!0),l()),v&&(x.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return e.jsx($s,{asChild:!0,...j,children:e.jsx(ce.button,{type:"button",role:"combobox","aria-controls":x.contentId,"aria-expanded":x.open,"aria-required":x.required,"aria-autocomplete":"none",dir:x.dir,"data-state":x.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":fs(x.value)?"":void 0,...i,ref:h,onClick:X(i.onClick,v=>{v.currentTarget.focus(),T.current!=="mouse"&&D(v)}),onPointerDown:X(i.onPointerDown,v=>{T.current=v.pointerType;const S=v.target;S.hasPointerCapture(v.pointerId)&&S.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(D(v),v.preventDefault())}),onKeyDown:X(i.onKeyDown,v=>{const S=_.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&V(v.key),!(S&&v.key===" ")&&co.includes(v.key)&&(D(),v.preventDefault())})})})});Yt.displayName=Wt;var Xt="SelectValue",Jt=r.forwardRef((s,n)=>{const{__scopeSelect:o,className:p,style:i,children:j,placeholder:x="",...u}=s,h=Se(Xt,o),{onValueNodeHasChildrenChange:y}=h,T=j!==void 0,_=ge(n,h.onValueNodeChange);return Ce(()=>{y(T)},[y,T]),e.jsx(ce.span,{...u,ref:_,style:{pointerEvents:"none"},children:fs(h.value)?e.jsx(e.Fragment,{children:x}):j})});Jt.displayName=Xt;var ho="SelectIcon",Zt=r.forwardRef((s,n)=>{const{__scopeSelect:o,children:p,...i}=s;return e.jsx(ce.span,{"aria-hidden":!0,...i,ref:n,children:p||"▼"})});Zt.displayName=ho;var xo="SelectPortal",Qt=s=>e.jsx(ks,{asChild:!0,...s});Qt.displayName=xo;var Pe="SelectContent",es=r.forwardRef((s,n)=>{const o=Se(Pe,s.__scopeSelect),[p,i]=r.useState();if(Ce(()=>{i(new DocumentFragment)},[]),!o.open){const j=p;return j?Ut.createPortal(e.jsx(ts,{scope:s.__scopeSelect,children:e.jsx(ot.Slot,{scope:s.__scopeSelect,children:e.jsx("div",{children:s.children})})}),j):null}return e.jsx(ss,{...s,ref:n})});es.displayName=Pe;var me=10,[ts,De]=Ve(Pe),fo="SelectContentImpl",go=Ys("SelectContent.RemoveScroll"),ss=r.forwardRef((s,n)=>{const{__scopeSelect:o,position:p="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:j,onPointerDownOutside:x,side:u,sideOffset:h,align:y,alignOffset:T,arrowPadding:_,collisionBoundary:V,collisionPadding:l,sticky:D,hideWhenDetached:v,avoidCollisions:S,...M}=s,w=Se(Pe,o),[R,pe]=r.useState(null),[W,be]=r.useState(null),$=ge(n,f=>pe(f)),[ie,L]=r.useState(null),[he,ee]=r.useState(null),q=at(o),[ne,re]=r.useState(!1),te=r.useRef(!1);r.useEffect(()=>{if(R)return Vs(R)},[R]),Bs();const J=r.useCallback(f=>{const[B,...H]=q().map(b=>b.ref.current),[E]=H.slice(-1),F=document.activeElement;for(const b of f)if(b===F||(b?.scrollIntoView({block:"nearest"}),b===B&&W&&(W.scrollTop=0),b===E&&W&&(W.scrollTop=W.scrollHeight),b?.focus(),document.activeElement!==F))return},[q,W]),se=r.useCallback(()=>J([ie,R]),[J,ie,R]);r.useEffect(()=>{ne&&se()},[ne,se]);const{onOpenChange:le,triggerPointerDownPosRef:de}=w;r.useEffect(()=>{if(R){let f={x:0,y:0};const B=E=>{f={x:Math.abs(Math.round(E.pageX)-(de.current?.x??0)),y:Math.abs(Math.round(E.pageY)-(de.current?.y??0))}},H=E=>{f.x<=10&&f.y<=10?E.preventDefault():R.contains(E.target)||le(!1),document.removeEventListener("pointermove",B),de.current=null};return de.current!==null&&(document.addEventListener("pointermove",B),document.addEventListener("pointerup",H,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",B),document.removeEventListener("pointerup",H,{capture:!0})}}},[R,le,de]),r.useEffect(()=>{const f=()=>le(!1);return window.addEventListener("blur",f),window.addEventListener("resize",f),()=>{window.removeEventListener("blur",f),window.removeEventListener("resize",f)}},[le]);const[Be,we]=gs(f=>{const B=q().filter(F=>!F.disabled),H=B.find(F=>F.ref.current===document.activeElement),E=vs(B,f,H);E&&setTimeout(()=>E.ref.current.focus())}),Ue=r.useCallback((f,B,H)=>{const E=!te.current&&!H;(w.value!==void 0&&w.value===B||E)&&(L(f),E&&(te.current=!0))},[w.value]),He=r.useCallback(()=>R?.focus(),[R]),ve=r.useCallback((f,B,H)=>{const E=!te.current&&!H;(w.value!==void 0&&w.value===B||E)&&ee(f)},[w.value]),O=p==="popper"?ft:os,Ee=O===ft?{side:u,sideOffset:h,align:y,alignOffset:T,arrowPadding:_,collisionBoundary:V,collisionPadding:l,sticky:D,hideWhenDetached:v,avoidCollisions:S}:{};return e.jsx(ts,{scope:o,content:R,viewport:W,onViewportChange:be,itemRefCallback:Ue,selectedItem:ie,onItemLeave:He,itemTextRefCallback:ve,focusSelectedItem:se,selectedItemText:he,position:p,isPositioned:ne,searchRef:Be,children:e.jsx(Us,{as:go,allowPinchZoom:!0,children:e.jsx(Hs,{asChild:!0,trapped:w.open,onMountAutoFocus:f=>{f.preventDefault()},onUnmountAutoFocus:X(i,f=>{w.trigger?.focus({preventScroll:!0}),f.preventDefault()}),children:e.jsx(qs,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:j,onPointerDownOutside:x,onFocusOutside:f=>f.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:e.jsx(O,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:f=>f.preventDefault(),...M,...Ee,onPlaced:()=>re(!0),ref:$,style:{display:"flex",flexDirection:"column",outline:"none",...M.style},onKeyDown:X(M.onKeyDown,f=>{const B=f.ctrlKey||f.altKey||f.metaKey;if(f.key==="Tab"&&f.preventDefault(),!B&&f.key.length===1&&we(f.key),["ArrowUp","ArrowDown","Home","End"].includes(f.key)){let E=q().filter(F=>!F.disabled).map(F=>F.ref.current);if(["ArrowUp","End"].includes(f.key)&&(E=E.slice().reverse()),["ArrowUp","ArrowDown"].includes(f.key)){const F=f.target,b=E.indexOf(F);E=E.slice(b+1)}setTimeout(()=>J(E)),f.preventDefault()}})})})})})})});ss.displayName=fo;var vo="SelectItemAlignedPosition",os=r.forwardRef((s,n)=>{const{__scopeSelect:o,onPlaced:p,...i}=s,j=Se(Pe,o),x=De(Pe,o),[u,h]=r.useState(null),[y,T]=r.useState(null),_=ge(n,$=>T($)),V=at(o),l=r.useRef(!1),D=r.useRef(!0),{viewport:v,selectedItem:S,selectedItemText:M,focusSelectedItem:w}=x,R=r.useCallback(()=>{if(j.trigger&&j.valueNode&&u&&y&&v&&S&&M){const $=j.trigger.getBoundingClientRect(),ie=y.getBoundingClientRect(),L=j.valueNode.getBoundingClientRect(),he=M.getBoundingClientRect();if(j.dir!=="rtl"){const F=he.left-ie.left,b=L.left-F,K=$.left-b,Ne=$.width+K,Ae=Math.max(Ne,ie.width),qe=window.innerWidth-me,Ke=Lt(b,[me,Math.max(me,qe-Ae)]);u.style.minWidth=Ne+"px",u.style.left=Ke+"px"}else{const F=ie.right-he.right,b=window.innerWidth-L.right-F,K=window.innerWidth-$.right-b,Ne=$.width+K,Ae=Math.max(Ne,ie.width),qe=window.innerWidth-me,Ke=Lt(b,[me,Math.max(me,qe-Ae)]);u.style.minWidth=Ne+"px",u.style.right=Ke+"px"}const ee=V(),q=window.innerHeight-me*2,ne=v.scrollHeight,re=window.getComputedStyle(y),te=parseInt(re.borderTopWidth,10),J=parseInt(re.paddingTop,10),se=parseInt(re.borderBottomWidth,10),le=parseInt(re.paddingBottom,10),de=te+J+ne+le+se,Be=Math.min(S.offsetHeight*5,de),we=window.getComputedStyle(v),Ue=parseInt(we.paddingTop,10),He=parseInt(we.paddingBottom,10),ve=$.top+$.height/2-me,O=q-ve,Ee=S.offsetHeight/2,f=S.offsetTop+Ee,B=te+J+f,H=de-B;if(B<=ve){const F=ee.length>0&&S===ee[ee.length-1].ref.current;u.style.bottom="0px";const b=y.clientHeight-v.offsetTop-v.offsetHeight,K=Math.max(O,Ee+(F?He:0)+b+se),Ne=B+K;u.style.height=Ne+"px"}else{const F=ee.length>0&&S===ee[0].ref.current;u.style.top="0px";const K=Math.max(ve,te+v.offsetTop+(F?Ue:0)+Ee)+H;u.style.height=K+"px",v.scrollTop=B-ve+v.offsetTop}u.style.margin=`${me}px 0`,u.style.minHeight=Be+"px",u.style.maxHeight=q+"px",p?.(),requestAnimationFrame(()=>l.current=!0)}},[V,j.trigger,j.valueNode,u,y,v,S,M,j.dir,p]);Ce(()=>R(),[R]);const[pe,W]=r.useState();Ce(()=>{y&&W(window.getComputedStyle(y).zIndex)},[y]);const be=r.useCallback($=>{$&&D.current===!0&&(R(),w?.(),D.current=!1)},[R,w]);return e.jsx(jo,{scope:o,contentWrapper:u,shouldExpandOnScrollRef:l,onScrollButtonChange:be,children:e.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:pe},children:e.jsx(ce.div,{...i,ref:_,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});os.displayName=vo;var No="SelectPopperPosition",ft=r.forwardRef((s,n)=>{const{__scopeSelect:o,align:p="start",collisionPadding:i=me,...j}=s,x=nt(o);return e.jsx(Ks,{...x,...j,ref:n,align:p,collisionPadding:i,style:{boxSizing:"border-box",...j.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ft.displayName=No;var[jo,yt]=Ve(Pe,{}),gt="SelectViewport",as=r.forwardRef((s,n)=>{const{__scopeSelect:o,nonce:p,...i}=s,j=De(gt,o),x=yt(gt,o),u=ge(n,j.onViewportChange),h=r.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:p}),e.jsx(ot.Slot,{scope:o,children:e.jsx(ce.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:X(i.onScroll,y=>{const T=y.currentTarget,{contentWrapper:_,shouldExpandOnScrollRef:V}=x;if(V?.current&&_){const l=Math.abs(h.current-T.scrollTop);if(l>0){const D=window.innerHeight-me*2,v=parseFloat(_.style.minHeight),S=parseFloat(_.style.height),M=Math.max(v,S);if(M<D){const w=M+l,R=Math.min(D,w),pe=w-R;_.style.height=R+"px",_.style.bottom==="0px"&&(T.scrollTop=pe>0?pe:0,_.style.justifyContent="flex-end")}}}h.current=T.scrollTop})})})]})});as.displayName=gt;var ns="SelectGroup",[bo,wo]=Ve(ns),yo=r.forwardRef((s,n)=>{const{__scopeSelect:o,...p}=s,i=wt();return e.jsx(bo,{scope:o,id:i,children:e.jsx(ce.div,{role:"group","aria-labelledby":i,...p,ref:n})})});yo.displayName=ns;var rs="SelectLabel",Co=r.forwardRef((s,n)=>{const{__scopeSelect:o,...p}=s,i=wo(rs,o);return e.jsx(ce.div,{id:i.id,...p,ref:n})});Co.displayName=rs;var et="SelectItem",[So,cs]=Ve(et),is=r.forwardRef((s,n)=>{const{__scopeSelect:o,value:p,disabled:i=!1,textValue:j,...x}=s,u=Se(et,o),h=De(et,o),y=u.value===p,[T,_]=r.useState(j??""),[V,l]=r.useState(!1),D=ge(n,w=>h.itemRefCallback?.(w,p,i)),v=wt(),S=r.useRef("touch"),M=()=>{i||(u.onValueChange(p),u.onOpenChange(!1))};if(p==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(So,{scope:o,value:p,disabled:i,textId:v,isSelected:y,onItemTextChange:r.useCallback(w=>{_(R=>R||(w?.textContent??"").trim())},[]),children:e.jsx(ot.ItemSlot,{scope:o,value:p,disabled:i,textValue:T,children:e.jsx(ce.div,{role:"option","aria-labelledby":v,"data-highlighted":V?"":void 0,"aria-selected":y&&V,"data-state":y?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...x,ref:D,onFocus:X(x.onFocus,()=>l(!0)),onBlur:X(x.onBlur,()=>l(!1)),onClick:X(x.onClick,()=>{S.current!=="mouse"&&M()}),onPointerUp:X(x.onPointerUp,()=>{S.current==="mouse"&&M()}),onPointerDown:X(x.onPointerDown,w=>{S.current=w.pointerType}),onPointerMove:X(x.onPointerMove,w=>{S.current=w.pointerType,i?h.onItemLeave?.():S.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:X(x.onPointerLeave,w=>{w.currentTarget===document.activeElement&&h.onItemLeave?.()}),onKeyDown:X(x.onKeyDown,w=>{h.searchRef?.current!==""&&w.key===" "||(io.includes(w.key)&&M(),w.key===" "&&w.preventDefault())})})})})});is.displayName=et;var Ge="SelectItemText",ls=r.forwardRef((s,n)=>{const{__scopeSelect:o,className:p,style:i,...j}=s,x=Se(Ge,o),u=De(Ge,o),h=cs(Ge,o),y=po(Ge,o),[T,_]=r.useState(null),V=ge(n,M=>_(M),h.onItemTextChange,M=>u.itemTextRefCallback?.(M,h.value,h.disabled)),l=T?.textContent,D=r.useMemo(()=>e.jsx("option",{value:h.value,disabled:h.disabled,children:l},h.value),[h.disabled,h.value,l]),{onNativeOptionAdd:v,onNativeOptionRemove:S}=y;return Ce(()=>(v(D),()=>S(D)),[v,S,D]),e.jsxs(e.Fragment,{children:[e.jsx(ce.span,{id:h.textId,...j,ref:V}),h.isSelected&&x.valueNode&&!x.valueNodeHasChildren?Ut.createPortal(j.children,x.valueNode):null]})});ls.displayName=Ge;var ds="SelectItemIndicator",us=r.forwardRef((s,n)=>{const{__scopeSelect:o,...p}=s;return cs(ds,o).isSelected?e.jsx(ce.span,{"aria-hidden":!0,...p,ref:n}):null});us.displayName=ds;var vt="SelectScrollUpButton",ms=r.forwardRef((s,n)=>{const o=De(vt,s.__scopeSelect),p=yt(vt,s.__scopeSelect),[i,j]=r.useState(!1),x=ge(n,p.onScrollButtonChange);return Ce(()=>{if(o.viewport&&o.isPositioned){let u=function(){const y=h.scrollTop>0;j(y)};const h=o.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[o.viewport,o.isPositioned]),i?e.jsx(hs,{...s,ref:x,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=o;u&&h&&(u.scrollTop=u.scrollTop-h.offsetHeight)}}):null});ms.displayName=vt;var Nt="SelectScrollDownButton",ps=r.forwardRef((s,n)=>{const o=De(Nt,s.__scopeSelect),p=yt(Nt,s.__scopeSelect),[i,j]=r.useState(!1),x=ge(n,p.onScrollButtonChange);return Ce(()=>{if(o.viewport&&o.isPositioned){let u=function(){const y=h.scrollHeight-h.clientHeight,T=Math.ceil(h.scrollTop)<y;j(T)};const h=o.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[o.viewport,o.isPositioned]),i?e.jsx(hs,{...s,ref:x,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=o;u&&h&&(u.scrollTop=u.scrollTop+h.offsetHeight)}}):null});ps.displayName=Nt;var hs=r.forwardRef((s,n)=>{const{__scopeSelect:o,onAutoScroll:p,...i}=s,j=De("SelectScrollButton",o),x=r.useRef(null),u=at(o),h=r.useCallback(()=>{x.current!==null&&(window.clearInterval(x.current),x.current=null)},[]);return r.useEffect(()=>()=>h(),[h]),Ce(()=>{u().find(T=>T.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[u]),e.jsx(ce.div,{"aria-hidden":!0,...i,ref:n,style:{flexShrink:0,...i.style},onPointerDown:X(i.onPointerDown,()=>{x.current===null&&(x.current=window.setInterval(p,50))}),onPointerMove:X(i.onPointerMove,()=>{j.onItemLeave?.(),x.current===null&&(x.current=window.setInterval(p,50))}),onPointerLeave:X(i.onPointerLeave,()=>{h()})})}),Do="SelectSeparator",Eo=r.forwardRef((s,n)=>{const{__scopeSelect:o,...p}=s;return e.jsx(ce.div,{"aria-hidden":!0,...p,ref:n})});Eo.displayName=Do;var jt="SelectArrow",Ao=r.forwardRef((s,n)=>{const{__scopeSelect:o,...p}=s,i=nt(o),j=Se(jt,o),x=De(jt,o);return j.open&&x.position==="popper"?e.jsx(Gs,{...i,...p,ref:n}):null});Ao.displayName=jt;var Io="SelectBubbleInput",xs=r.forwardRef(({__scopeSelect:s,value:n,...o},p)=>{const i=r.useRef(null),j=ge(p,i),x=Zs(n);return r.useEffect(()=>{const u=i.current;if(!u)return;const h=window.HTMLSelectElement.prototype,T=Object.getOwnPropertyDescriptor(h,"value").set;if(x!==n&&T){const _=new Event("change",{bubbles:!0});T.call(u,n),u.dispatchEvent(_)}},[x,n]),e.jsx(ce.select,{...o,style:{...Fs,...o.style},ref:j,defaultValue:n})});xs.displayName=Io;function fs(s){return s===""||s===void 0}function gs(s){const n=Ls(s),o=r.useRef(""),p=r.useRef(0),i=r.useCallback(x=>{const u=o.current+x;n(u),(function h(y){o.current=y,window.clearTimeout(p.current),y!==""&&(p.current=window.setTimeout(()=>h(""),1e3))})(u)},[n]),j=r.useCallback(()=>{o.current="",window.clearTimeout(p.current)},[]);return r.useEffect(()=>()=>window.clearTimeout(p.current),[]),[o,i,j]}function vs(s,n,o){const i=n.length>1&&Array.from(n).every(y=>y===n[0])?n[0]:n,j=o?s.indexOf(o):-1;let x=To(s,Math.max(j,0));i.length===1&&(x=x.filter(y=>y!==o));const h=x.find(y=>y.textValue.toLowerCase().startsWith(i.toLowerCase()));return h!==o?h:void 0}function To(s,n){return s.map((o,p)=>s[(n+p)%s.length])}var _o=Gt,Ro=Yt,Po=Jt,zo=Zt,Mo=Qt,Oo=es,$o=as,ko=is,Fo=ls,Lo=us,Vo=ms,Bo=ps;function ut({...s}){return e.jsx(_o,{"data-slot":"select",...s})}function mt({...s}){return e.jsx(Po,{"data-slot":"select-value",...s})}function pt({className:s,children:n,...o}){return e.jsxs(Ro,{"data-slot":"select-trigger",className:Le("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex h-9 w-full items-center justify-between rounded-md border bg-transparent px-3 py-2 text-sm shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 [&>span]:line-clamp-1",s),...o,children:[n,e.jsx(zo,{asChild:!0,children:e.jsx(Kt,{className:"size-4 opacity-50"})})]})}function ht({className:s,children:n,position:o="popper",...p}){return e.jsx(Mo,{children:e.jsxs(Oo,{"data-slot":"select-content",className:Le("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md",o==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:o,...p,children:[e.jsx(Uo,{}),e.jsx($o,{className:Le("p-1",o==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:n}),e.jsx(Ho,{})]})})}function Qe({className:s,children:n,...o}){return e.jsxs(ko,{"data-slot":"select-item",className:Le("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...o,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(Lo,{children:e.jsx(Qs,{className:"size-4"})})}),e.jsx(Fo,{children:n})]})}function Uo({className:s,...n}){return e.jsx(Vo,{"data-slot":"select-scroll-up-button",className:Le("flex cursor-default items-center justify-center py-1",s),...n,children:e.jsx(so,{className:"size-4"})})}function Ho({className:s,...n}){return e.jsx(Bo,{"data-slot":"select-scroll-down-button",className:Le("flex cursor-default items-center justify-center py-1",s),...n,children:e.jsx(Kt,{className:"size-4"})})}const qo=s=>{switch(s){case"pendiente":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"subido":return"bg-blue-100 text-blue-800 border-blue-200";case"vigente":return"bg-green-100 text-green-800 border-green-200";case"caducado":return"bg-orange-100 text-orange-800 border-orange-200";case"rechazado":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},Ko=s=>{switch(s){case"pendiente":return e.jsx(Ht,{className:"w-4 h-4"});case"subido":return e.jsx(Fe,{className:"w-4 h-4"});case"vigente":return e.jsx(je,{className:"w-4 h-4"});case"caducado":return e.jsx(ke,{className:"w-4 h-4"});case"rechazado":return e.jsx(ue,{className:"w-4 h-4"});case"subiendo":return e.jsx(Fe,{className:"w-4 h-4 text-blue-600 animate-pulse"});case"procesando":return e.jsx($e,{className:"w-4 h-4 text-yellow-600 animate-spin"});case"analizando":return e.jsx(qt,{className:"w-4 h-4 text-purple-600 animate-pulse"});case"completado":return e.jsx(je,{className:"w-4 h-4 text-green-600"});case"error":return e.jsx(ue,{className:"w-4 h-4 text-red-600"});default:return e.jsx(_e,{className:"w-4 h-4"})}},bt=s=>{if(!s||s===0||isNaN(s))return"0 Bytes";const n=1024,o=["Bytes","KB","MB","GB"],p=Math.floor(Math.log(s)/Math.log(n));return parseFloat((s/Math.pow(n,p)).toFixed(2))+" "+o[p]},tt=s=>{if(!s)return"Fecha no disponible";try{let n;if(s.includes("-"))if(s.match(/^\d{4}-\d{2}-\d{2}$/)){const[o,p,i]=s.split("-");n=new Date(parseInt(o),parseInt(p)-1,parseInt(i))}else n=new Date(s);else isNaN(Number(s))?n=new Date(s):n=new Date(Number(s));return isNaN(n.getTime())?"Fecha inválida":n.toLocaleDateString("es-MX",{year:"numeric",month:"long",day:"numeric"})}catch(n){return console.error("Error formateando fecha:",s,n),"Fecha inválida"}},Vt=s=>{const n=s.fechaExpedicion,o=s.vigenciaDocumento;if(s.diasRestantesVigencia,!n&&!o)return`${bt(s.tamaño||0)} • ${tt(s.fechaSubida)}`;let p=bt(s.tamaño||0);return n&&(p+=` • ${tt(n)}`),p},xt=s=>{console.log("🔍 Documento completo:",{concepto:s.concepto,estado:s.estado,archivos:s.archivos}),s.archivos&&s.archivos.length>0&&s.archivos.forEach((o,p)=>{console.log(`📄 Archivo ${p+1}:`,{nombre:o.nombre,estado:o.estado,fechaExpedicion:o.fechaExpedicion,vigenciaDocumento:o.vigenciaDocumento,diasRestantesVigencia:o.diasRestantesVigencia,validacionIA:o.validacionIA})});const n=s.archivos?.find(o=>o.estado==="completado"&&o.vigenciaDocumento);if(n&&n.vigenciaDocumento){const o=new Date(n.vigenciaDocumento),p=new Date,i=o.getTime()-p.getTime(),j=Math.ceil(i/(1e3*60*60*24));return console.log("✅ Usando fecha IA:",n.vigenciaDocumento,"Días calculados:",j),{fecha:n.vigenciaDocumento,diasRestantes:j,esVigenciaReal:!0}}return console.log("⚠️ No hay archivos con vigencia IA, usando fechaLimite:",s.fechaLimite),{fecha:s.fechaLimite,diasRestantes:null,esVigenciaReal:!1}},Na=({campusDelDirector:s,documentosRequeridos:n,campusSeleccionado:o,error:p})=>{console.log("=== PROPS RECIBIDAS AL CARGAR COMPONENTE ==="),console.log("campusDelDirector:",s?.length||0,s),console.log("documentosIniciales:",n?.length||0,n),console.log("campusInicial:",o),console.log("error:",p),n&&n.length>0&&(console.log("=== DETALLE DE DOCUMENTOS INICIALES ==="),n.forEach((t,c)=>{console.log(`Documento ${c+1}:`,{id:t.id,concepto:t.concepto,estado:t.estado,archivos:t.archivos,cantidad_archivos:t.archivos?.length||0}),t.archivos&&t.archivos.length>0?(console.log(`  Archivos del documento "${t.concepto}":`),t.archivos.forEach((a,d)=>{console.log(`    Archivo ${d+1}:`,{id:a.id,nombre:a.nombre,estado:a.estado,tamaño:a.tamaño,fechaSubida:a.fechaSubida})})):console.log(`  Documento "${t.concepto}" no tiene archivos`)}));const[i,j]=r.useState(o),x=(n||[]).map(t=>({...t,archivos:t.archivos||[]}));console.log("=== PROCESAMIENTO DOCUMENTOS CON ARCHIVOS ==="),console.log("documentosConArchivos procesados:",x.length),x.forEach((t,c)=>{console.log(`DocConArchivos ${c+1}: "${t.concepto}" - ${t.archivos?.length||0} archivos`)});const[u,h]=r.useState(x),[y,T]=r.useState(null),[_,V]=r.useState({}),[l,D]=r.useState(x[0]||null),[v,S]=r.useState("todos"),M=r.useRef(null),[w,R]=r.useState(""),[pe,W]=r.useState(!1),[be,$]=r.useState(0),[ie,L]=r.useState(""),[he,ee]=r.useState(""),[q,ne]=r.useState(!1),[re,te]=r.useState(0),[J,se]=r.useState(0),[le,de]=r.useState(new Set),[Be,we]=r.useState(!1),[Ue,He]=r.useState(""),[ve,O]=r.useState(!1),[Ee,f]=r.useState(!1),[B,H]=r.useState(!1),[E,F]=r.useState(null),b=t=>t.uniqueKey||t.id,K=t=>t.archivos||[],Ne=t=>{const c=K(t);return c.length===0?!0:!(U(t.estado)==="vigente"&&!G(t)||c.find(g=>g.estado==="completado"&&(!g.validacionIA||g.validacionIA.coincide))&&t.estado!=="rechazado")},Ae=async()=>{if(!i){console.log("No hay campus actual, no se puede refrescar");return}try{console.log("=== REFRESCANDO DOCUMENTOS DESDE SERVIDOR ==="),console.log("Campus actual:",i.ID_Campus,i.Campus),console.log("Tipo de documento seleccionado:",xe),xe==="medicos"?await Ke():await qe()}catch(t){console.error("Error al refrescar documentos:",t),O(!1),f(!0),Ye(!1)}},qe=async()=>{if(!i){console.log("No hay campus actual para documentos fiscales");return}try{O(!0),f(!1);const t=await fetch(`/documentos/upload?campus=${i.ID_Campus}`,{method:"GET",headers:{Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}});if(t.ok){const c=await t.json();if(console.log("Respuesta del servidor (fiscales):",c),c.props?.documentosRequeridos){console.log("Documentos fiscales recibidos:",c.props.documentosRequeridos.length);const a=(c.props.documentosRequeridos||[]).map(d=>({...d,archivos:d.archivos||[]}));if(h(a),console.log("Documentos fiscales actualizados"),l){const d=a.find(g=>g.id===l.id);d&&(D(d),console.log("Documento seleccionado actualizado"))}else a.length>0&&(D(a[0]),console.log("Primer documento seleccionado por defecto"));f(!0),O(!1)}else console.log("No se recibieron documentos fiscales en la respuesta"),O(!1),f(!0)}else console.error("Error al actualizar documentos fiscales:",t.status,t.statusText),O(!1),f(!0)}catch(t){console.error("Error en refrescarDocumentosFiscales:",t),O(!1),f(!0)}},Ke=async()=>{if(!i){console.log("No hay campus actual para documentos médicos");return}console.log("=== REFRESCANDO DOCUMENTOS MÉDICOS OPTIMIZADO ==="),console.log("Campus:",i.ID_Campus,i.Campus),O(!0),f(!1),Ye(!0);try{const t=Date.now();console.log("🔄 Realizando consulta optimizada...");const c=await fetch(`/documentos/medicos-optimizado?campus_id=${i.ID_Campus}`,{method:"GET",headers:{Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}});if(!c.ok)throw new Error(`Error en la respuesta: ${c.status}`);const a=await c.json(),d=Date.now()-t;if(console.log(`⚡ Consulta optimizada completada en ${d}ms`),console.log("Respuesta optimizada:",a),!a.success||!a.carreras||!a.documentos_por_carrera){console.log("No se recibieron datos válidos de documentos médicos"),Me([]);return}const g=a.carreras,C=a.documentos_por_carrera;console.log(`📋 Procesando ${g.length} carreras médicas...`),We(g),console.log("🔄 Carreras médicas actualizadas en el estado:",g);const m=u.filter(z=>z.concepto.toLowerCase().includes("cartas de intención de campo clínico"));if(m.length===0){console.log("No se encontraron documentos base de cartas de intención"),Me([]);return}if(!g||g.length===0){console.log("No se recibieron carreras médicas"),Me([]);return}const P=[];if(g.forEach(z=>{const k=z.ID_Especialidad,I=z.Descripcion,N=C[k]||[];m.forEach(Y=>{const A=`${Y.id}_carrera_${k}`,Q=N.find(Te=>Te.id===Y.id),Ie={...Y,id:Y.id,documentoOriginalId:Y.id,uniqueKey:A,concepto:`${Y.concepto} - ${I}`,descripcion:`${Y.descripcion} para la carrera de ${I}`,carreraId:String(k),carreraNombre:I,estado:Q?.estado||"pendiente",archivos:Q?.archivos||[]};console.log(`✅ Documento generado para ${I}:`,{uniqueKey:Ie.uniqueKey,estado:Ie.estado,totalArchivos:Ie.archivos?.length||0}),P.push(Ie)})}),console.log(`📚 Total documentos médicos generados: ${P.length}`),Me(P),console.log("📋 Documentos médicos actualizados en estado separado"),l&&l.uniqueKey){const z=P.find(k=>k.uniqueKey===l.uniqueKey);z&&(D(z),console.log("Documento médico seleccionado actualizado"))}else P.length>0&&(D(P[0]),console.log("Primer documento médico seleccionado por defecto"))}catch(t){console.error("Error en consulta optimizada de documentos médicos:",t),Me([])}finally{f(!0),O(!1),Ye(!1)}},Ct=()=>{setTimeout(()=>{console.log("Actualizando panel automáticamente..."),Ae()},2e3)};r.useEffect(()=>{console.log("=== CARGA INICIAL DEL COMPONENTE ==="),console.log("Campus inicial:",o),console.log("Campus actual:",i),console.log("Documentos iniciales:",n?.length||0),O(!0),f(!1);const t=n?.every(a=>!a.archivos||a.archivos.length===0)||!1,c=!n||n.length===0;if(o&&(c||t))console.log(c?"Campus inicial detectado SIN documentos, refrescando desde servidor...":"Campus inicial detectado con documentos VACÍOS (sin archivos), refrescando desde servidor..."),(async()=>{try{console.log("=== REFRESCANDO DOCUMENTOS CARGA INICIAL ==="),console.log("Campus inicial:",o.ID_Campus,o.Campus);const d=await fetch("/documentos/cambiar-campus",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({campus_id:o.ID_Campus})});if(d.ok){const g=await d.json();if(console.log("Respuesta del servidor (carga inicial):",g),g.documentos){console.log("Documentos recibidos (carga inicial):",g.documentos.length);const C=(g.documentos||[]).map(m=>({...m,archivos:m.archivos||[]}));h(C),console.log("Documentos estado actualizado (carga inicial)"),C.length>0&&(D(C[0]),console.log("Primer documento seleccionado por defecto (carga inicial)")),f(!0),O(!1)}else console.log("No se recibieron documentos en la respuesta (carga inicial)"),O(!1),f(!0)}else console.error("Error al cargar documentos iniciales:",d.status,d.statusText),O(!1),f(!0)}catch(d){console.error("Error al refrescar documentos (carga inicial):",d),O(!1),f(!0)}})();else if(o&&n&&n.length>0&&!t){if(console.log("Campus inicial detectado CON documentos válidos Y CON ARCHIVOS, usando documentos iniciales..."),console.log("Documentos iniciales disponibles:",n.length),console.log("Estado documentos actual:",u.length),console.log("Documento seleccionado actual:",l?.concepto||"ninguno"),!l&&u.length>0)console.log("Seleccionando primer documento por defecto:",u[0].concepto),D(u[0]);else if(!l&&n.length>0){const a={...n[0],archivos:n[0].archivos||[]};console.log("Fallback: Seleccionando primer documento de documentos iniciales:",a.concepto),D(a)}else l&&console.log("Ya hay un documento seleccionado:",l.concepto);f(!0),O(!1)}else if(console.log("No hay campus inicial, usando documentos proporcionados"),n&&n.length>0){const a=n.map(d=>({...d,archivos:d.archivos||[]}));console.log("Actualizando estado con documentos proporcionados"),h(a),!l&&a.length>0&&(console.log("Seleccionando primer documento por defecto"),D(a[0])),f(!0),O(!1)}else O(!1),f(!0)},[]),r.useEffect(()=>{console.log("=== ESTADO DOCUMENTOS CAMBIÓ ==="),console.log("Documentos en estado:",u.length),console.log("Documento seleccionado:",l?.concepto||"ninguno"),u.length>0&&(console.log("=== DETALLE DE DOCUMENTOS EN ESTADO ==="),u.forEach((t,c)=>{const a=t.archivos?.length||0;console.log(`Estado Doc ${c+1}: "${t.concepto}" - ${a} archivos`),a>0&&t.archivos?.forEach((d,g)=>{console.log(`  Estado Archivo ${g+1}: ${d.nombre} (${d.estado})`)})})),u.length>0&&!l&&(console.log("Auto-seleccionando primer documento:",u[0].concepto),D(u[0]))},[u,l]),r.useEffect(()=>{console.log("=== VERIFICANDO ANALISIS DE ARCHIVOS ==="),console.log("Documentos actuales:",u.length);const t=u.flatMap(c=>(c.archivos||[]).filter(a=>a.estado==="completado"&&!a.fechaExpedicion&&!a.vigenciaDocumento));console.log("Archivos completados sin analisis:",t.length),t.forEach(c=>{console.log(`- ${c.nombre} (${c.estado})`)}),t.length>0?console.log("Archivos completados detectados, datos deberían venir del backend"):console.log("Todos los archivos ya tienen analisis o no hay archivos completados")},[u]),r.useEffect(()=>{i&&i.ID_Campus&&(console.log("=== CAMPUS ACTUAL CAMBIÓ ==="),console.log("Nuevo campus actual:",i.ID_Campus,i.Campus),console.log("Documentos actuales:",u.length),u.length===0?(console.log("No hay documentos, refrescando..."),Ae()):console.log("Ya hay documentos cargados, no refrescando automáticamente"))},[i]);const Ns=(t,c)=>{t.validacionIA&&!t.validacionIA.coincide&&(F({fileName:t.nombre,documentType:c,reason:t.validacionIA.razon||"Documento no válido",percentage:t.validacionIA.porcentaje||0,expectedType:c,detectedType:"Información de análisis IA"}),H(!0))},js=t=>{const c=K(t);if(c.length===0)return"No hay archivos subidos para este documento";const a=U(t.estado);return a==="rechazado"?"El documento fue rechazado por un administrador. Puede subir un nuevo archivo.":a==="caducado"||G(t)?"El documento ha caducado por vencimiento de fecha. Puede subir un nuevo archivo.":a==="vigente"&&!G(t)?"Documento aprobado por administrador. No se pueden subir más archivos.":c.find(C=>C.estado==="completado"&&(!C.validacionIA||C.validacionIA.coincide))?"Documento validado automáticamente por IA. Esperando revisión del administrador.":c.find(C=>C.estado==="rechazado"||C.validacionIA&&!C.validacionIA.coincide)?"El documento anterior fue rechazado por validación automática. Puede subir un nuevo archivo.":"Puede subir archivos para este documento"},St=async t=>{console.log("=== CAMBIO DE CAMPUS ==="),console.log("Nuevo campus ID:",t),O(!0),f(!1);try{const c=await lt("/documentos/cambiar-campus",{method:"POST",body:JSON.stringify({campus_id:t})});if(c.ok){const a=await c.json();console.log("Respuesta del servidor:",a),j(a.campus),console.log("Campus actualizado:",a.campus);const d=a.documentos.map(g=>({...g,archivos:g.archivos||[]}));console.log("Documentos cargados:",d.length),h(d),D(d[0]||null),V({}),Tt("fiscales"),await Dt(t),f(!0),O(!1)}else console.error("Error en la respuesta del servidor:",c.status,c.statusText),O(!1),f(!0)}catch(c){console.error("Error cambiando campus:",c),O(!1),f(!0)}},Dt=async t=>{if(t){At(!0);try{console.log(`=== VERIFICANDO CARRERAS MÉDICAS PARA CAMPUS ${t} ===`);const c=await lt(`/documentos/campus/${t}/medico`);if(c.ok){const a=await c.json();ct(a.tiene_carreras_medicas),We(a.carreras_medicas||[]),console.log(`✅ Campus ${t} tiene carreras médicas:`,a.tiene_carreras_medicas),console.log("📋 Carreras médicas disponibles:",a.carreras_medicas),(a.carreras_medicas||[]).forEach(d=>{console.log(`  - ID_Especialidad: ${d.ID_Especialidad}, Descripcion: ${d.Descripcion}`)})}else console.error("❌ Error verificando campus médico:",c.status),ct(!1),We([])}catch(c){console.error("❌ Error verificando campus médico:",c),ct(!1),We([])}finally{At(!1)}}},bs=(t,c)=>{t.preventDefault(),T(c)},ws=t=>{t.preventDefault(),T(null)},ys=(t,c)=>{t.preventDefault(),T(null);const a=Array.from(t.dataTransfer.files);Et(a,c)},Et=(t,c)=>{console.log("=== HANDLE FILE SELECTION ==="),console.log("Files received:",t),console.log("DocumentoId:",c),console.log("Current selectedFiles before update:",_),V(a=>{const d={...a,[c]:[...a[c]||[],...t]};return console.log("Updated selectedFiles:",d),d})},Cs=(t,c)=>{if(console.log("=== HANDLE FILE INPUT CHANGE ==="),console.log("Event target files:",t.target.files),console.log("DocumentoId:",c),t.target.files){const a=Array.from(t.target.files);console.log("Files array:",a),console.log("Files length:",a.length),a.forEach((d,g)=>{console.log(`File ${g}:`,{name:d.name,size:d.size,type:d.type})}),Et(a,c)}else console.log("❌ No files in event target")},Ss=(t,c)=>{V(a=>({...a,[t]:a[t]?.filter((d,g)=>g!==c)||[]}))},Ds=async t=>{console.log("INICIANDO UPLOAD - DocumentoKey:",t),console.log("Tipo de documento actual:",xe),console.log("DocumentosDelTipo disponibles:",fe.length),fe.forEach((d,g)=>{console.log(`  Doc ${g}: key="${b(d)}", uniqueKey="${d.uniqueKey}", id="${d.id}"`)});const c=_[t];console.log("Archivos a subir:",c),console.log("Estado completo selectedFiles:",_);const a=fe.find(d=>b(d)===t);if(!a){console.error("Documento no encontrado con clave:",t),console.error("Claves disponibles:",fe.map(d=>b(d))),alert("Error: Documento no encontrado");return}if(console.log("Documento encontrado:",{id:a.id,uniqueKey:a.uniqueKey,documentoOriginalId:a.documentoOriginalId,carreraId:a.carreraId,carreraNombre:a.carreraNombre}),!c||c.length===0){console.log("No hay archivos para subir"),alert("No hay archivos seleccionados. Por favor selecciona un archivo primero.");return}if(!i?.ID_Campus){console.error("No hay campus seleccionado"),alert("No hay campus seleccionado");return}console.log("Campus actual:",i.ID_Campus),W(!0),$(0),L("Preparando archivos..."),ne(!1),te(0),se(c.length),V(d=>({...d,[t]:[]})),console.log(`Procesando ${c.length} archivo(s)...`);for(let d=0;d<c.length;d++){const g=c[d];console.log(`Procesando archivo ${d+1}/${c.length}: ${g.name}`),ee(g.name),L(`Subiendo ${g.name}...`),$(10);try{const C=new FormData;C.append("archivo",g);const m=a.documentoOriginalId||a.id;C.append("documento_id",m.toString()),C.append("campus_id",i.ID_Campus),console.log("Usando documento_id para backend:",m,"(original:",a.documentoOriginalId,", compuesto:",a.id,")"),a.carreraId&&(C.append("carrera_id",a.carreraId),console.log("Agregando carrera_id (ID_Especialidad):",a.carreraId,"para carrera:",a.carreraNombre)),console.log("=== DEBUG FORMDATA ===");for(let N of C.entries())console.log(N[0]+":",N[1]);await new Promise(N=>setTimeout(N,500)),$(25),L(`Validando ${g.name}...`),await new Promise(N=>setTimeout(N,500)),$(50),L(`Guardando ${g.name} en servidor...`),await new Promise(N=>setTimeout(N,500)),$(75),L(`Finalizando subida de ${g.name}...`),console.log("Iniciando petición de subida real...");const P=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");console.log("CSRF Token:",P);const z=new FormData;z.append("archivo",g),z.append("documento_id",m.toString()),z.append("campus_id",i.ID_Campus),a.carreraId&&z.append("carrera_id",a.carreraId),console.log("Testing with fresh FormData:");for(let N of z.entries())console.log(`  ${N[0]}:`,N[1]),N[1]instanceof File&&console.log(`    File details: name=${N[1].name}, size=${N[1].size}, type=${N[1].type}`);const k=await fetch("/documentos/subir-archivo",{method:"POST",headers:{"X-CSRF-TOKEN":P||""},body:z});console.log("Status de respuesta:",k.status,k.statusText),console.log("Headers de respuesta:",k.headers);const I=await k.text();if(console.log("Respuesta RAW del servidor:",I),k.ok)try{const N=JSON.parse(I);if(console.log("Respuesta parseada exitosamente:",N),!N.archivo||!N.archivo.estado){console.error("El servidor no procesó el archivo correctamente"),console.error("data.archivo:",N.archivo),L("Error: El archivo no se procesó correctamente en el servidor"),W(!1);return}$(100),L(`${g.name} subido exitosamente`),te(A=>A+1),N.archivo.estado==="analizando"&&(L(`Analizando ${g.name} con IA...`),$(100),await new Promise(A=>setTimeout(A,2e3)));const Y={id:N.archivo.id,nombre:g.name,tamaño:N.archivo.tamaño||g.size||0,fechaSubida:new Date().toISOString().split("T")[0],estado:N.archivo.estado==="analizando"?"analizando":"completado",progreso:100,mensaje:N.archivo.estado==="analizando"?"Analizando con IA...":"Completado"};h(A=>A.map(Q=>b(Q)===t?{...Q,estado:"subido",archivos:[...K(Q),Y]}:Q)),l&&b(l)===t&&D(A=>A&&{...A,estado:"subido",archivos:[...K(A),Y]}),de(A=>new Set(A).add(N.archivo.id)),setTimeout(()=>{de(A=>{const Q=new Set(A);return Q.delete(N.archivo.id),Q})},5e3),console.log("Archivo agregado inmediatamente al panel:",Y),N.archivo.estado==="analizando"&&Is(N.archivo.id,t,1),console.log("Programando actualización automática del panel..."),Ct()}catch(N){console.error("Error parseando JSON:",N),console.error("Respuesta no es JSON válido:",I),L("Error: El servidor devolvió una respuesta inválida"),W(!1);return}else{console.log("Status de error:",k.status,k.statusText),console.log("Respuesta RAW de error:",I);try{const N=JSON.parse(I);console.error("Error subiendo archivo:",N),N.validation_errors&&(console.error("Errores de validación específicos:"),Object.keys(N.validation_errors).forEach(Y=>{console.error(`  - ${Y}: ${N.validation_errors[Y]}`)})),N.debug_info&&console.error("Debug info:",N.debug_info),L(`Error al subir ${g.name}: ${N.error||"Error desconocido"}`)}catch(N){console.error("Error parseando respuesta de error:",N),console.error("Respuesta de error no es JSON válido:",I),L(`Error al subir ${g.name}: Error del servidor (${k.status})`)}$(0),await new Promise(N=>setTimeout(N,2e3))}}catch(C){console.error("Error en upload:",C),L(`Error de conexión con ${g.name}`),$(0),O(!1),f(!0),Ye(!1),await new Promise(m=>setTimeout(m,2e3))}}ne(!0),$(100),L(`Todos los archivos procesados exitosamente (${re+1}/${c.length})`),ee(""),await new Promise(d=>setTimeout(d,3e3)),W(!1),ne(!1),$(0),L(""),ee(""),te(0),se(0),console.log("Proceso de subida completado exitosamente")},[rt,ze]=r.useState(new Set),[Es,ct]=r.useState(!1),[As,At]=r.useState(!1),[It,We]=r.useState([]),[it,Me]=r.useState([]),[Go,Ye]=r.useState(!1),[xe,Tt]=r.useState("fiscales");r.useEffect(()=>()=>{console.log("Limpiando monitores activos al desmontar componente"),ze(new Set)},[]),r.useEffect(()=>{i?.ID_Campus&&Dt(i.ID_Campus)},[i]),r.useEffect(()=>{i&&(console.log(`🔄 Tipo de documento cambió a: ${xe} - Refrescando estado...`),O(!0),f(!1),Me([]),xe==="medicos"?Ae():(f(!0),O(!1)))},[xe,i]);const Is=async(t,c,a=2)=>{if(rt.has(t)){console.log(`Ya existe un monitor activo para archivo ${t}`);return}ze(C=>new Set(C).add(t));let d=0;const g=async()=>{d++;try{console.log(`Verificando análisis para archivo ${t} - Intento ${d}/${a}`);const C=await lt(`/documentos/analisis/estado?archivo_id=${t}`,{method:"GET"});if(C.ok){const m=await C.json();if(console.log("Estado del análisis:",m),h(P=>P.map(z=>{if(b(z)===c){const k=K(z).map(A=>{if(A.id===t){const Q=m.tiene_analisis;let Ie=Q?"completado":"analizando",Te="";if(m.estado==="rechazado"||Q&&m.analisis&&m.analisis.validacion&&!m.analisis.validacion.coincide){Ie="rechazado";let ye="";m.analisis&&m.analisis.validacion?ye=m.analisis.validacion.razon:m.analisis&&m.analisis.documento?ye=m.analisis.documento.observaciones:ye="Documento no cumple con los requisitos",Te=`Documento rechazado: ${ye}`;const Ot=u.find(Rs=>b(Rs)===c);F({fileName:A.nombre,documentType:Ot?.concepto||"Documento",reason:ye,percentage:0,expectedType:m.analisis?.validacion?.documento_esperado||Ot?.concepto||"Tipo de documento requerido",detectedType:m.analisis?.validacion?.documento_detectado||m.analisis?.documento?.nombre_detectado||m.documento?.tipo_detectado||"Tipo no identificado",cityValidation:m.analisis?.validacion?.ciudad_campus?{campusCity:m.analisis.validacion.ciudad_campus,documentCities:m.analisis.validacion.ciudades_documento||[],isValid:m.analisis.validacion.coincide||!1,details:m.analisis.validacion.evaluacion_gpt==="ciudad_incorrecta"?"El documento pertenece a una ciudad diferente a la del campus seleccionado":void 0}:void 0}),H(!0)}else if(Q&&m.analisis&&m.analisis.validacion){let ye=`Documento validado correctamente (${m.analisis.validacion.porcentaje_coincidencia}% coincidencia)`;m.analisis.validacion.ciudad_campus&&m.analisis.validacion.ciudades_documento&&(ye+=` • Ubicación: ${m.analisis.validacion.ciudad_campus} ✓`),Te=ye}else Q?Te="Análisis IA completado":Te=`Analizando documento... (${d}/${a})`;return{...A,estado:Ie,mensaje:Te,validacionIA:m.analisis?.validacion?{coincide:m.analisis.validacion.coincide,porcentaje:m.analisis.validacion.porcentaje_coincidencia,razon:m.analisis.validacion.razon,accion:m.analisis.validacion.accion}:void 0,fechaExpedicion:m.analisis?.documento?.fecha_expedicion,vigenciaDocumento:m.analisis?.documento?.vigencia_documento,diasRestantesVigencia:m.analisis?.documento?.dias_restantes_vigencia}}return A});let I=z.estado;const N=k.find(A=>A.estado==="completado"&&(!A.validacionIA||A.validacionIA.coincide));return k.find(A=>A.estado==="rechazado"||A.estado==="completado"&&A.validacionIA&&!A.validacionIA.coincide)?(I="rechazado",console.log("Documento rechazado - cambiando estado inmediatamente")):N?(I="vigente",console.log("Documento aprobado - cambiando a vigente")):k.some(A=>A.estado==="completado")&&(I="subido",console.log("Documento subido")),{...z,estado:I,archivos:k}}return z})),l&&b(l)===c&&D(P=>{if(P&&u.find(k=>b(k)===c)){const k=m.estado==="rechazado"||m.analisis?.validacion&&!m.analisis.validacion.coincide,I={...P,estado:k?"rechazado":m.analisis?.validacion?.coincide?"vigente":P.estado,archivos:P.archivos?.map(N=>{if(N.id===t){const Y=k?"rechazado":m.tiene_analisis?"completado":"analizando";return{...N,estado:Y,validacionIA:m.analisis?.validacion?{coincide:m.analisis.validacion.coincide,porcentaje:m.analisis.validacion.porcentaje_coincidencia,razon:m.analisis.validacion.razon,accion:m.analisis.validacion.accion}:void 0,fechaExpedicion:m.analisis?.documento?.fecha_expedicion,vigenciaDocumento:m.analisis?.documento?.vigencia_documento,diasRestantesVigencia:m.analisis?.documento?.dias_restantes_vigencia}}return N})||[]};return console.log("Actualizando selectedDocumento en tiempo real:",I),I}return P}),m.tiene_analisis||d>=a){if(console.log(`Finalizando monitoreo para archivo ${t}. Análisis completado: ${m.tiene_analisis}, Intentos: ${d}`),ze(P=>{const z=new Set(P);return z.delete(t),z}),m.tiene_analisis){console.log("Análisis IA completado - Actualizando panel...");const P=u.find(I=>b(I)===c),z=P?.archivos?.find(I=>I.id===t);if(m.estado==="rechazado"||m.analisis&&m.analisis.validacion&&!m.analisis.validacion.coincide)console.log("Documento rechazado - Actualizando interfaz inmediatamente"),setTimeout(()=>{h(I=>[...I])},100);else if(m.analisis?.validacion?.coincide){console.log("Documento aprobado por IA - Mostrando notificación de éxito");const I=P?.archivos?.find(N=>N.id===t);He(`${I?.nombre||"Documento"} validado exitosamente`),we(!0),setTimeout(()=>we(!1),4e3)}Ct()}!m.tiene_analisis&&d>=a&&(console.warn(`Timeout en análisis de archivo ${t} después de ${a} intentos`),h(P=>P.map(z=>{if(b(z)===c){const k=K(z).map(I=>I.id===t?{...I,estado:"error"}:I);return{...z,archivos:k}}return z})));return}setTimeout(g,2e3)}else console.error(`Error en petición de estado: ${C.status}`),d<a?setTimeout(g,2e3):ze(m=>{const P=new Set(m);return P.delete(t),P})}catch(C){console.error("Error monitoreando análisis:",C),d<a?setTimeout(g,3e3):(console.error(`Error persistente en monitoreo de archivo ${t}, cancelando.`),ze(m=>{const P=new Set(m);return P.delete(t),P}))}};g()},Ts=()=>{console.log("Deteniendo todos los monitores manualmente"),ze(new Set),h(t=>t.map(c=>({...c,archivos:K(c).map(a=>a.estado==="analizando"?{...a,estado:"error"}:a)})))},_t=t=>{const c=new Date,d=new Date(t).getTime()-c.getTime();return Math.ceil(d/(1e3*60*60*24))},_s=t=>t<0?"text-red-600":t<=7?"text-orange-600":t<=30?"text-yellow-600":"text-green-600",U=t=>{const c=t.toLowerCase();return console.log("🔄 Estado original:",t,"-> normalizado:",c),c},G=t=>{const c=U(t.estado);if(c==="caducado")return console.log("✅ Documento marcado como caducado en BD:",t.concepto),!0;const a=xt(t),d=a.diasRestantes!==null?a.diasRestantes:_t(t.fechaLimite),g=c==="vigente"&&d<0;return g&&console.log("⏰ Documento caducado dinámicamente:",t.concepto,"Días restantes:",d),g},Rt=t=>{if(G(t))return"bg-orange-100 text-orange-800 border-orange-300";const c=U(t.estado);return qo(c)},Pt=t=>{if(G(t))return e.jsx(ke,{className:"w-3 h-3"});const c=U(t.estado);return Ko(c)},zt=t=>G(t)?"caducado":U(t.estado),Mt=u.filter(t=>{const c=t.concepto.toLowerCase().includes(w.toLowerCase())||t.descripcion.toLowerCase().includes(w.toLowerCase());let a=!1;const d=U(t.estado);return v==="todos"?a=!0:v==="subido"?a=d==="subido"||d==="vigente"||d==="caducado"||G(t):a=d===v||v==="caducado"&&G(t),c&&a}),fe=(()=>{if(xe==="fiscales")return Mt.filter(t=>!t.concepto.toLowerCase().includes("cartas de intención de campo clínico"));{if(it.length>0)return console.log("🔄 Usando documentos médicos con estado actualizado:",it.length),it;const t=Mt.filter(a=>a.concepto.toLowerCase().includes("cartas de intención de campo clínico"));if(t.length===0||It.length===0)return[];const c=[];return It.forEach(a=>{t.forEach(d=>{const g=`${d.id}_carrera_${a.ID_Especialidad}`,C={id:d.id,concepto:`${d.concepto} - ${a.Descripcion}`,descripcion:`${d.descripcion} para la carrera de ${a.Descripcion}`,fechaLimite:d.fechaLimite,estado:"pendiente",archivos:[],obligatorio:d.obligatorio,categoria:d.categoria,documentoOriginalId:d.id,uniqueKey:g,carreraId:String(a.ID_Especialidad),carreraNombre:a.Descripcion};console.log(`📄 Documento generado para ${a.Descripcion}:`,{uniqueKey:C.uniqueKey,carreraId:C.carreraId,carreraIdType:typeof C.carreraId,documentoOriginalId:C.documentoOriginalId}),c.push(C)})}),console.log(`📚 Total documentos médicos generados: ${c.length}`),c}})();return e.jsxs(Ws,{breadcrumbs:[{title:"Dashboard",href:"/dashboard"},{title:"Documentos",href:"/documentos"},{title:"Subir Documentos",href:"/documentos/upload"}],children:[e.jsx(Ps,{title:"Subida de Documentos",children:e.jsx("meta",{name:"csrf-token",content:document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""})}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 p-4",children:[Be&&e.jsx("div",{className:"fixed top-4 right-4 z-40 animate-in slide-in-from-right-full duration-500",children:e.jsx(oe,{className:"bg-green-50 border-green-200 shadow-lg",children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(je,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Archivo subido exitosamente"}),e.jsx("p",{className:"text-xs text-green-600",children:Ue})]}),e.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>we(!1),className:"text-green-600 hover:text-green-800 hover:bg-green-100 h-6 w-6 p-0",children:e.jsx(Xe,{className:"w-3 h-3"})})]})})})}),pe&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t=>t.preventDefault(),children:e.jsx(oe,{className:"w-96 mx-4",onClick:t=>t.stopPropagation(),children:e.jsx(ae,{className:"p-8",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"relative",children:q?e.jsxs("div",{className:"w-16 h-16 mx-auto",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(je,{className:"w-12 h-12 text-green-600 animate-pulse"})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-20 h-20 bg-green-600 rounded-full opacity-20 animate-ping"})})]}):e.jsxs("div",{className:"w-16 h-16 mx-auto",children:[e.jsx($e,{className:"w-16 h-16 text-blue-600 animate-spin"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full opacity-20 animate-ping"})})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:`text-lg font-semibold ${q?"text-green-900":"text-gray-900"}`,children:q?"Documentos Subidos Exitosamente":"Procesando Documentos"}),he&&e.jsx("p",{className:"text-sm text-gray-600",children:he}),e.jsx("p",{className:`text-sm font-medium ${q?"text-green-600":"text-blue-600"}`,children:ie}),q&&re>0&&e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-3",children:[e.jsx(je,{className:"w-5 h-5 text-green-600"}),e.jsxs("span",{className:"text-sm font-semibold text-green-700",children:[re," de ",J," archivo(s) procesado(s) exitosamente"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsx("span",{children:"Progreso"}),e.jsxs("span",{children:[be,"%"]})]}),e.jsx($t,{value:be,className:`h-3 ${q?"bg-green-100":""}`})]}),e.jsx("div",{className:"text-xs text-gray-500",children:q?"Los documentos se están procesando en segundo plano...":"Por favor espera mientras procesamos tus documentos..."}),q&&e.jsxs(Z,{onClick:()=>{W(!1),ne(!1),$(0),L(""),ee(""),te(0),se(0)},className:"w-full bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Continuar"]})]})})})}),B&&E&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:t=>t.preventDefault(),children:e.jsxs(oe,{className:"w-full max-w-2xl bg-white shadow-xl",onClick:t=>t.stopPropagation(),children:[e.jsx(Je,{className:"pb-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(ue,{className:"w-4 h-4 text-red-600"})}),e.jsxs("div",{children:[e.jsx(Ze,{className:"text-lg text-gray-900",children:"Documento Rechazado"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Validación automática"})]})]}),e.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>H(!1),className:"text-gray-400 hover:text-gray-600 h-8 w-8 p-0",children:e.jsx(Xe,{className:"w-4 h-4"})})]})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Archivo:"}),e.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:E.fileName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Motivo:"}),e.jsx("p",{className:"text-sm text-gray-600 bg-red-50 p-3 rounded-lg border-l-4 border-red-400",children:E.reason})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Esperado:"}),e.jsx("p",{className:"text-sm text-gray-700 bg-blue-50 p-2 rounded text-center",children:E.expectedType})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Detectado:"}),e.jsx("p",{className:"text-sm text-gray-700 bg-orange-50 p-2 rounded text-center",children:E.detectedType})]})]}),E.cityValidation&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Validación de Ubicación:"}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Campus:"}),e.jsxs("p",{className:"text-sm text-gray-700 bg-white p-2 rounded border",children:["📍 ",E.cityValidation.campusCity]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Documento de:"}),e.jsxs("p",{className:"text-sm text-gray-700 bg-white p-2 rounded border",children:["🏙️ ",E.cityValidation.documentCities.join(", ")||"No detectado"]})]})]}),E.cityValidation.details&&e.jsxs("div",{className:"flex items-start gap-2 text-sm text-yellow-800",children:[e.jsx(ue,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("p",{children:E.cityValidation.details})]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-blue-800 mb-2",children:"¿Qué hacer?"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Suba el documento correcto o contacte al administrador si considera que es un error."})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(Z,{variant:"outline",onClick:()=>H(!1),className:"flex-1",children:"Cerrar"}),e.jsxs(Z,{onClick:()=>{H(!1),(l?document.getElementById(`file-input-${b(l)}`):null)?.scrollIntoView({behavior:"smooth"})},className:"flex-1",children:[e.jsx(Fe,{className:"w-4 h-4 mr-2"}),"Subir Documento Correcto"]})]})]})]})}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight mb-2",children:"Subir Documentos"}),e.jsx("p",{className:"text-muted-foreground",children:"Selecciona un campus y un documento de la lista para subir los archivos requeridos"})]}),rt.size>0&&e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"w-4 h-4 text-blue-600 animate-spin"}),e.jsxs("span",{className:"text-sm text-blue-700",children:[rt.size," análisis en curso"]})]}),e.jsxs(Z,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-blue-700 hover:text-blue-900 hover:bg-blue-100",onClick:Ts,children:[e.jsx(Xe,{className:"w-3 h-3 mr-1"}),"Detener"]})]})]})}),(!s||!Array.isArray(s)||s.length===0)&&e.jsx(oe,{className:"mb-6 border-destructive",children:e.jsx(ae,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[e.jsx(ue,{className:"w-5 h-5"}),e.jsx("p",{className:"font-medium",children:p||"No tienes campus asignados para subir documentos"})]})})}),i&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-5 mb-6",children:[e.jsx(oe,{children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium",children:["Total ",xe==="medicos"?"Médicos":"Fiscales"]}),e.jsx("p",{className:"text-2xl font-bold",children:fe.length})]})]})})}),e.jsx(oe,{children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ht,{className:"w-4 h-4 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Pendientes"}),e.jsx("p",{className:"text-2xl font-bold",children:fe.filter(t=>U(t.estado)==="pendiente").length})]})]})})}),e.jsx(oe,{children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"w-4 h-4 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Completados"}),e.jsx("p",{className:"text-2xl font-bold",children:fe.filter(t=>U(t.estado)==="vigente"&&!G(t)).length})]})]})})}),e.jsx(oe,{children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"w-4 h-4 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Caducados"}),e.jsx("p",{className:"text-2xl font-bold",children:fe.filter(t=>U(t.estado)==="caducado"||G(t)).length})]})]})})}),e.jsx(oe,{children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"w-4 h-4 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Rechazados"}),e.jsx("p",{className:"text-2xl font-bold",children:fe.filter(t=>U(t.estado)==="rechazado").length})]})]})})})]}),i&&e.jsxs(e.Fragment,{children:[ve&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(oe,{className:"h-fit",children:[e.jsx(Je,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(Ze,{className:"text-lg",children:"Documentos Requeridos"}),s&&Array.isArray(s)&&s.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dt,{htmlFor:"campus-select",className:"text-sm font-medium text-muted-foreground",children:"Campus:"}),e.jsxs(ut,{value:i?.ID_Campus||"",onValueChange:St,children:[e.jsx(pt,{className:"w-52",children:e.jsx(mt,{placeholder:"Selecciona campus"})}),e.jsx(ht,{children:s.map(t=>e.jsx(Qe,{value:t.ID_Campus,children:t.Campus},t.ID_Campus))})]})]})]})}),e.jsx(ae,{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx($e,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-lg font-medium text-gray-700",children:"Cargando Documentos"}),e.jsx("p",{className:"text-sm text-gray-500",children:xe==="medicos"?"Obteniendo estados de documentos médicos...":"Obteniendo documentos fiscales..."})]})]})})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(oe,{className:"h-fit",children:e.jsx(ae,{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(_e,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-lg font-medium text-gray-700",children:"Preparando Información"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Por favor espera mientras cargamos la información completa..."})]})]})})})})]}),!ve&&Ee&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(oe,{className:"h-fit",children:[e.jsxs(Je,{className:"pb-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(Ze,{className:"text-lg",children:"Documentos Requeridos"}),s&&Array.isArray(s)&&s.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dt,{htmlFor:"campus-select",className:"text-sm font-medium text-muted-foreground",children:"Campus:"}),e.jsxs(ut,{value:i?.ID_Campus||"",onValueChange:St,children:[e.jsx(pt,{className:"w-52",children:e.jsx(mt,{placeholder:"Selecciona campus"})}),e.jsx(ht,{children:s.map(t=>e.jsx(Qe,{value:t.ID_Campus,children:t.Campus},t.ID_Campus))})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"text-sm font-medium text-muted-foreground",children:"Tipo:"}),e.jsxs(ut,{value:xe,onValueChange:t=>{Tt(t)},children:[e.jsx(pt,{className:"w-40",children:e.jsx(mt,{})}),e.jsxs(ht,{children:[e.jsx(Qe,{value:"fiscales",children:"Fiscales"}),Es&&e.jsx(Qe,{value:"medicos",children:"Médicos"})]})]}),As&&e.jsx($e,{className:"w-4 h-4 animate-spin text-blue-500"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ro,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(Xs,{placeholder:"Buscar documento...",value:w,onChange:t=>R(t.target.value),className:"pl-9"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Z,{variant:v==="todos"?"default":"outline",size:"sm",onClick:()=>S("todos"),children:"Todos"}),e.jsx(Z,{variant:v==="pendiente"?"default":"outline",size:"sm",onClick:()=>S("pendiente"),children:"Pendientes"}),e.jsx(Z,{variant:v==="subido"?"default":"outline",size:"sm",onClick:()=>S("subido"),children:"Subidos"})]})]})]})]}),e.jsx(ae,{className:"p-0",children:e.jsx("div",{ref:M,className:"max-h-[600px] overflow-y-auto",children:fe.map(t=>{const c=t.uniqueKey||t.id,a=l?.uniqueKey===c||l?.id===t.id&&!t.uniqueKey;return e.jsxs("div",{className:`p-4 border-b cursor-pointer transition-colors hover:bg-muted/50 ${a?"bg-primary/10 border-l-4 border-l-primary":""}`,onClick:d=>{d.preventDefault();const g=M.current?.scrollTop||0;D(t),requestAnimationFrame(()=>{M.current&&(M.current.scrollTop=g)})},children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-medium text-sm line-clamp-2",children:t.concepto}),t.obligatorio&&e.jsx(Oe,{variant:"destructive",className:"text-xs ml-2",children:"Req."})]}),e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsxs(Oe,{className:Rt(t),variant:"outline",children:[Pt(t),e.jsx("span",{className:"ml-1 capitalize text-xs",children:zt(t)})]})}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(ke,{className:"w-3 h-3"}),(()=>{const d=xt(t),C=(d.diasRestantes!==null?d.diasRestantes:_t(t.fechaLimite))??0;return e.jsxs(e.Fragment,{children:[e.jsx("span",{children:tt(d.fecha)}),e.jsxs("span",{className:`font-medium ${_s(C)}`,children:["(",C>=0?`${C}d`:`${Math.abs(C)}d vencido`,")"]})]})})()]})]},c)})})})]})}),e.jsx("div",{className:"lg:col-span-2",children:l?e.jsxs(oe,{className:"h-fit",children:[e.jsxs(Je,{children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(Ze,{className:"text-xl",children:l.concepto}),e.jsx("p",{className:"text-muted-foreground mt-1",children:l.descripcion})]}),e.jsx(Oe,{className:Rt(l),children:e.jsxs("div",{className:"flex items-center gap-1",children:[Pt(l),e.jsx("span",{className:"capitalize",children:zt(l)})]})})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm pt-2",children:[e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(ke,{className:"w-4 h-4"}),e.jsxs("span",{children:["Vence: ",tt(xt(l).fecha)]})]}),l.obligatorio&&e.jsx(Oe,{variant:"destructive",className:"text-xs",children:"Documento Obligatorio"}),G(l)&&e.jsx(Oe,{className:"text-xs bg-orange-100 text-orange-800 border-orange-300",children:"CADUCADO"}),l?.carreraNombre&&e.jsx(Oe,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-800",children:l.carreraNombre})]})]}),e.jsxs(ae,{className:"space-y-6",children:[K(l).length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-3",children:["Archivos subidos (",K(l).length,")"]}),e.jsx("div",{className:"space-y-2",children:K(l).map(t=>e.jsx("div",{className:`p-3 border rounded-lg transition-all duration-300 ${le.has(t.id)?"border-green-400 bg-green-50 shadow-lg ring-2 ring-green-200 ring-opacity-50 animate-pulse":t.estado==="subiendo"||t.estado==="procesando"||t.estado==="analizando"?"border-blue-300 bg-blue-50 shadow-lg":t.estado==="completado"?l?.estado==="rechazado"||t.validacionIA&&!t.validacionIA.coincide?"border-red-200 bg-red-50":"border-green-200 bg-green-50":t.estado==="rechazado"?"border-red-300 bg-red-50 shadow-lg":t.estado==="error"?"border-red-200 bg-red-50":"border-gray-200"}`,children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"flex items-center gap-3 flex-1",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:t.nombre}),e.jsx("p",{className:"text-xs text-muted-foreground",children:Vt(t)}),"                                                                    ",t.estado==="subiendo"&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Fe,{className:"w-4 h-4 text-blue-600 animate-bounce"}),e.jsx("span",{className:"text-sm font-medium text-blue-700",children:t.mensaje||"Subiendo archivo..."}),e.jsxs("span",{className:"text-xs text-blue-500 font-bold",children:[t.progreso,"%"]})]}),e.jsx($t,{value:t.progreso,className:"h-3 bg-blue-100"})]}),t.estado==="procesando"&&e.jsx("div",{className:"mt-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"w-4 h-4 text-yellow-600 animate-spin"}),e.jsx("span",{className:"text-sm font-medium text-yellow-700",children:t.mensaje||"Procesando documento..."})]})}),t.estado==="analizando"&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qt,{className:"w-4 h-4 text-purple-600 animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-purple-700",children:t.mensaje||"Analizando con IA..."})]}),e.jsx("div",{className:"mt-1 text-xs text-purple-600",children:e.jsx("div",{className:"mt-1 text-xs text-purple-600",children:"procesando el documento..."})})]}),t.estado==="completado"&&e.jsxs(e.Fragment,{children:[l?.estado!=="rechazado"&&(!t.validacionIA||t.validacionIA.coincide)?e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(je,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-700",children:"Documento Vigente"}),t.validacionIA&&e.jsxs("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:["Aprobado (",t.validacionIA.porcentaje,"%)"]})]}):e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(ue,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-red-700",children:"Documento Rechazado"}),t.validacionIA&&e.jsxs("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded",children:["No aprobado (",t.validacionIA.porcentaje,"%)"]})]}),e.jsxs("div",{className:"mt-4 bg-white border border-gray-200 rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(_e,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Vista Previa del Documento"}),e.jsx("p",{className:"text-xs text-gray-500",children:t.nombre})]})]}),e.jsxs(Z,{variant:"outline",size:"sm",onClick:()=>window.open(`/documentos/file/${t.file_hash_sha256}`,"_blank"),className:"gap-2 bg-white hover:bg-gray-50 shadow-sm",children:[e.jsx(Ft,{className:"w-4 h-4"}),"Abrir Completo"]})]})}),e.jsxs("div",{className:"relative bg-gray-50",children:[e.jsx("iframe",{src:`/documentos/archivo/${t.id}#toolbar=1&navpanes=0&scrollbar=1&view=FitH&zoom=125`,className:"w-full h-[700px] bg-white",title:`Preview de ${t.nombre}`,style:{backgroundColor:"#ffffff",border:"none",borderRadius:"0"},onError:()=>{console.log("Error cargando preview del PDF")},loading:"lazy",allowFullScreen:!0}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 hover:opacity-100 transition-all duration-300 pointer-events-none",children:e.jsxs("div",{className:"text-center text-white bg-gray-900 bg-opacity-80 p-6 rounded-lg backdrop-blur-sm",children:[e.jsx(_e,{className:"w-16 h-16 mx-auto mb-4 text-blue-400"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"Documento PDF Validado"}),e.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"Haz clic para abrir en una nueva ventana"}),e.jsxs(Z,{variant:"secondary",onClick:()=>window.open(`/documentos/file/${t.file_hash_sha256}`,"_blank"),className:"gap-2 pointer-events-auto bg-white text-gray-900 hover:bg-gray-100",children:[e.jsx(Ft,{className:"w-4 h-4"}),"Ver en Nueva Ventana"]})]})})]}),e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-t border-gray-200",children:e.jsx("div",{className:"flex items-center justify-between text-sm text-gray-600",children:e.jsx("div",{className:"flex items-center gap-4 text-xs",children:e.jsx("span",{children:Vt(t)})})})})]})]}),t.estado==="rechazado"&&e.jsxs("div",{className:"flex flex-col gap-2 mt-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-red-700",children:"Documento Rechazado"})]}),t.validacionIA&&e.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>Ns(t,l.concepto),className:"text-red-600 hover:text-red-800 hover:bg-red-100 h-6 px-2",children:e.jsx("span",{className:"text-xs",children:"Ver detalles"})})]}),t.validacionIA&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm text-red-800 font-medium mb-1",children:"Motivo del rechazo:"}),e.jsx("p",{className:"text-xs text-red-700",children:t.validacionIA.razon}),t.validacionIA.porcentaje!==void 0&&e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Coincidencia: ",t.validacionIA.porcentaje,"%"]})]})]}),t.estado==="error"&&e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(ue,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-red-700",children:t.mensaje||"Error en proceso"})]})]})})})},t.id))})]}),(_[b(l)]||[]).length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-3",children:["Archivos seleccionados (",(_[b(l)]||[]).length,")"]}),e.jsx("div",{className:"space-y-2",children:(_[b(l)]||[]).map((t,c)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-primary/5 rounded-lg border border-primary/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_e,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:t.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:bt(t.size)})]})]}),e.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>Ss(b(l),c),className:"text-destructive hover:text-destructive",children:e.jsx(Xe,{className:"w-4 h-4"})})]},c))}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs(Z,{onClick:()=>Ds(b(l)),children:[e.jsx(Fe,{className:"w-4 h-4 mr-2"}),"Subir Archivos (",(_[b(l)]||[]).length,")"]}),e.jsx(Z,{variant:"outline",onClick:()=>V(t=>({...t,[b(l)]:[]})),children:"Cancelar"})]})]}),(U(l.estado)!=="vigente"||G(l))&&Ne(l)?e.jsxs("div",{className:`
                                                border-2 border-dashed rounded-lg p-8 text-center transition-colors
                                                ${y===b(l)?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-muted-foreground/50"}
                                            `,onDragOver:t=>bs(t,b(l)),onDragLeave:ws,onDrop:t=>ys(t,b(l)),children:[e.jsx(Fe,{className:`
                                                w-12 h-12 mx-auto mb-4
                                                ${y===b(l)?"text-primary":"text-muted-foreground"}
                                            `}),e.jsx("h3",{className:"font-semibold mb-2",children:"Arrastra archivos aquí"}),e.jsx("p",{className:"text-muted-foreground mb-4 text-sm",children:"o haz clic para seleccionar archivos"}),e.jsx("input",{type:"file",id:`file-input-${b(l)}`,className:"hidden",multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",onChange:t=>Cs(t,b(l))}),e.jsxs(Z,{variant:"outline",onClick:()=>{document.getElementById(`file-input-${b(l)}`)?.click()},children:[e.jsx(ao,{className:"w-4 h-4 mr-2"}),"Seleccionar Archivos"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-3",children:"Formatos: PDF, DOC, DOCX, JPG, PNG (máx. 10MB)"})]}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center bg-gray-50",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:U(l.estado)==="vigente"&&!G(l)?e.jsx(je,{className:"w-12 h-12 text-green-600"}):U(l.estado)==="rechazado"?e.jsx(ue,{className:"w-12 h-12 text-red-600"}):U(l.estado)==="caducado"||G(l)?e.jsx(ke,{className:"w-12 h-12 text-orange-600"}):e.jsx(ue,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"font-semibold mb-2 text-gray-700",children:U(l.estado)==="vigente"&&!G(l)?"Documento Aprobado":U(l.estado)==="rechazado"?"Documento Rechazado - Puede Subir Nuevo":U(l.estado)==="caducado"||G(l)?"Documento Caducado - Puede Subir Nuevo":"Subida Bloqueada"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:js(l)}),U(l.estado)==="vigente"&&!G(l)&&e.jsxs("div",{className:"bg-green-100 border border-green-200 rounded-lg p-3 text-green-800",children:[e.jsx("p",{className:"text-sm font-medium",children:"Este documento ha sido validado y aprobado."}),e.jsx("p",{className:"text-xs mt-1",children:"No se pueden realizar más cambios a menos que sea rechazado por un administrador."})]}),U(l.estado)==="rechazado"&&e.jsxs("div",{className:"bg-red-100 border border-red-200 rounded-lg p-3 text-red-800",children:[e.jsx("p",{className:"text-sm font-medium",children:"Este documento fue rechazado por un administrador."}),e.jsx("p",{className:"text-xs mt-1",children:"Por favor, revise los comentarios y suba una nueva versión."})]}),(U(l.estado)==="caducado"||G(l))&&e.jsxs("div",{className:"bg-orange-100 border border-orange-200 rounded-lg p-3 text-orange-800",children:[e.jsx("p",{className:"text-sm font-medium",children:"Este documento ha caducado por vencimiento de fecha."}),e.jsx("p",{className:"text-xs mt-1",children:"Puede subir una nueva versión actualizada del documento."})]})]})]})]}):e.jsx(oe,{className:"h-full",children:e.jsx(ae,{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(_e,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"font-semibold mb-2",children:"Selecciona un documento"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Elige un documento de la lista para comenzar a subir archivos"})]})})})})]})]})]})]})};export{Na as default};
